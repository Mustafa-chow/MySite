(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1629:function(e,t,n){(function(t,n){var r;r=function(){"use strict";var e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}r(function(t,n){(function(){var r={function:!0,object:!0},o=r.object&&n&&!n.nodeType&&n,c=r[typeof window]&&window||this,l=o&&r.object&&t&&!t.nodeType&&"object"==typeof e&&e;function d(e,t){e||(e=c.Object()),t||(t=c.Object());var n=e.Number||c.Number,o=e.String||c.String,l=e.Object||c.Object,f=e.Date||c.Date,h=e.SyntaxError||c.SyntaxError,m=e.TypeError||c.TypeError,v=e.Math||c.Math,y=e.JSON||c.JSON;"object"==typeof y&&y&&(t.stringify=y.stringify,t.parse=y.parse);var w,S,_,E=l.prototype,I=E.toString,x=new f(-0xc782b5b800cec);try{x=-109252==x.getUTCFullYear()&&0===x.getUTCMonth()&&1===x.getUTCDate()&&10==x.getUTCHours()&&37==x.getUTCMinutes()&&6==x.getUTCSeconds()&&708==x.getUTCMilliseconds()}catch(e){}function k(e){if(k[e]!==_)return k[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=k("json-stringify")&&k("json-parse");else{var c,l='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var d=t.stringify,h="function"==typeof d&&x;if(h){(c=function(){return 1}).toJSON=c;try{h="0"===d(0)&&"0"===d(new n)&&'""'==d(new o)&&d(I)===_&&d(_)===_&&d()===_&&"1"===d(c)&&"[1]"==d([c])&&"[null]"==d([_])&&"null"==d(null)&&"[null,null,null]"==d([_,I,null])&&d({a:[c,!0,!1,null,"\0\b\n\f\r\t"]})==l&&"1"===d(null,c)&&"[\n 1,\n 2\n]"==d([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==d(new f(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==d(new f(864e13))&&'"-000001-01-01T00:00:00.000Z"'==d(new f(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==d(new f(-1))}catch(e){h=!1}}r=h}if("json-parse"==e){var m=t.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){var v=5==(c=m(l)).a.length&&1===c.a[0];if(v){try{v=!m('"\t"')}catch(e){}if(v)try{v=1!==m("01")}catch(e){}if(v)try{v=1!==m("1.")}catch(e){}}}}catch(e){v=!1}r=v}}return k[e]=!!r}if(!k("json")){var O=k("bug-string-char-index");if(!x)var T=v.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(e,t){return A[t]+365*(e-1970)+T((e-1969+(t=+(t>1)))/4)-T((e-1901+t)/100)+T((e-1601+t)/400)};if((w=E.hasOwnProperty)||(w=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=I?w=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,w=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,w.call(this,e)}),S=function(object,e){var t,n,o,c=0;for(o in(t=function(){this.valueOf=0}).prototype.valueOf=0,n=new t)w.call(n,o)&&c++;return t=n=null,c?S=2==c?function(object,e){var t,n={},r="[object Function]"==I.call(object);for(t in object)r&&"prototype"==t||w.call(n,t)||!(n[t]=1)||!w.call(object,t)||e(t)}:function(object,e){var t,n,r="[object Function]"==I.call(object);for(t in object)r&&"prototype"==t||!w.call(object,t)||(n="constructor"===t)||e(t);(n||w.call(object,t="constructor"))&&e(t)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],S=function(object,e){var t,o,c="[object Function]"==I.call(object),l=!c&&"function"!=typeof object.constructor&&r[typeof object.hasOwnProperty]&&object.hasOwnProperty||w;for(t in object)c&&"prototype"==t||!l.call(object,t)||e(t);for(o=n.length;t=n[--o];l.call(object,t)&&e(t));}),S(object,e)},!k("json-stringify")){var P={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N=function(e,t){return("000000"+(t||0)).slice(-e)},C=function(e){for(var t='"',n=0,r=e.length,o=!O||r>10,c=o&&(O?e.split(""):e);n<r;n++){var l=e.charCodeAt(n);switch(l){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=P[l];break;default:if(l<32){t+="\\u00"+N(2,l.toString(16));break}t+=o?c[n]:e.charAt(n)}}return t+'"'},R=function(e,object,t,n,r,o,c){var l,d,f,h,v,time,y,E,x,k,O,element,A,P,D,U;try{l=object[e]}catch(e){}if("object"==typeof l&&l)if("[object Date]"!=(d=I.call(l))||w.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=d&&"[object String]"!=d&&"[object Array]"!=d||w.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&l<1/0){if(j){for(v=T(l/864e5),f=T(v/365.2425)+1970-1;j(f+1,0)<=v;f++);for(h=T((v-j(f,0))/30.42);j(f,h+1)<=v;h++);v=1+v-j(f,h),y=T((time=(l%864e5+864e5)%864e5)/36e5)%24,E=T(time/6e4)%60,x=T(time/1e3)%60,k=time%1e3}else f=l.getUTCFullYear(),h=l.getUTCMonth(),v=l.getUTCDate(),y=l.getUTCHours(),E=l.getUTCMinutes(),x=l.getUTCSeconds(),k=l.getUTCMilliseconds();l=(f<=0||f>=1e4?(f<0?"-":"+")+N(6,f<0?-f:f):N(4,f))+"-"+N(2,h+1)+"-"+N(2,v)+"T"+N(2,y)+":"+N(2,E)+":"+N(2,x)+"."+N(3,k)+"Z"}else l=null;if(t&&(l=t.call(object,e,l)),null===l)return"null";if("[object Boolean]"==(d=I.call(l)))return""+l;if("[object Number]"==d)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==d)return C(""+l);if("object"==typeof l){for(P=c.length;P--;)if(c[P]===l)throw m();if(c.push(l),O=[],D=o,o+=r,"[object Array]"==d){for(A=0,P=l.length;A<P;A++)element=R(A,l,t,n,r,o,c),O.push(element===_?"null":element);U=O.length?r?"[\n"+o+O.join(",\n"+o)+"\n"+D+"]":"["+O.join(",")+"]":"[]"}else S(n||l,function(e){var element=R(e,l,t,n,r,o,c);element!==_&&O.push(C(e)+":"+(r?" ":"")+element)}),U=O.length?r?"{\n"+o+O.join(",\n"+o)+"\n"+D+"}":"{"+O.join(",")+"}":"{}";return c.pop(),U}};t.stringify=function(source,filter,e){var t,n,o,c;if(r[typeof filter]&&filter)if("[object Function]"==(c=I.call(filter)))n=filter;else if("[object Array]"==c){o={};for(var l,d=0,f=filter.length;d<f;l=filter[d++],("[object String]"==(c=I.call(l))||"[object Number]"==c)&&(o[l]=1));}if(e)if("[object Number]"==(c=I.call(e))){if((e-=e%1)>0)for(t="",e>10&&(e=10);t.length<e;t+=" ");}else"[object String]"==c&&(t=e.length<=10?e:e.slice(0,10));return R("",((l={})[""]=source,l),n,o,t,"",[])}}if(!k("json-parse")){var D,U,L=o.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},z=function(){throw D=U=null,h()},F=function(){for(var e,t,n,r,o,source=U,c=source.length;D<c;)switch(o=source.charCodeAt(D)){case 9:case 10:case 13:case 32:D++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=O?source.charAt(D):source[D],D++,e;case 34:for(e="@",D++;D<c;)if((o=source.charCodeAt(D))<32)z();else if(92==o)switch(o=source.charCodeAt(++D)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=M[o],D++;break;case 117:for(t=++D,n=D+4;D<n;D++)(o=source.charCodeAt(D))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||z();e+=L("0x"+source.slice(t,D));break;default:z()}else{if(34==o)break;for(o=source.charCodeAt(D),t=D;o>=32&&92!=o&&34!=o;)o=source.charCodeAt(++D);e+=source.slice(t,D)}if(34==source.charCodeAt(D))return D++,e;z();default:if(t=D,45==o&&(r=!0,o=source.charCodeAt(++D)),o>=48&&o<=57){for(48==o&&((o=source.charCodeAt(D+1))>=48&&o<=57)&&z(),r=!1;D<c&&((o=source.charCodeAt(D))>=48&&o<=57);D++);if(46==source.charCodeAt(D)){for(n=++D;n<c&&((o=source.charCodeAt(n))>=48&&o<=57);n++);n==D&&z(),D=n}if(101==(o=source.charCodeAt(D))||69==o){for(43!=(o=source.charCodeAt(++D))&&45!=o||D++,n=D;n<c&&((o=source.charCodeAt(n))>=48&&o<=57);n++);n==D&&z(),D=n}return+source.slice(t,D)}if(r&&z(),"true"==source.slice(D,D+4))return D+=4,!0;if("false"==source.slice(D,D+5))return D+=5,!1;if("null"==source.slice(D,D+4))return D+=4,null;z()}return"$"},B=function(e){var t,n;if("$"==e&&z(),"string"==typeof e){if("@"==(O?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=F());n||(n=!0))n&&(","==e?"]"==(e=F())&&z():z()),","==e&&z(),t.push(B(e));return t}if("{"==e){for(t={};"}"!=(e=F());n||(n=!0))n&&(","==e?"}"==(e=F())&&z():z()),","!=e&&"string"==typeof e&&"@"==(O?e.charAt(0):e[0])&&":"==F()||z(),t[e.slice(1)]=B(F());return t}z()}return e},$=function(source,e,t){var element=J(source,e,t);element===_?delete source[e]:source[e]=element},J=function(source,e,t){var n,r=source[e];if("object"==typeof r&&r)if("[object Array]"==I.call(r))for(n=r.length;n--;)$(r,n,t);else S(r,function(e){$(r,e,t)});return t.call(source,e,r)};t.parse=function(source,e){var t,n;return D=0,U=""+source,t=B(F()),"$"!=F()&&z(),D=U=null,e&&"[object Function]"==I.call(e)?J(((n={})[""]=t,n),"",e):t}}}return t.runInContext=d,t}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(c=l),o)d(c,o);else{var f=c.JSON,h=c.JSON3,m=!1,v=d(c,c.JSON3={noConflict:function(){return m||(m=!0,c.JSON=f,c.JSON3=h,f=h=null),v}});c.JSON={parse:v.parse,stringify:v.stringify}}}).call(e)});var o="$default_instance",c=2,l=4096,d=1e3,f="$identify",h="$groupidentify",m="amplitude_lastEventId",v="amplitude_lastEventTime",y="amplitude_lastIdentifyId",w="amplitude_lastSequenceNumber",S="amplitude_sessionId",_="amplitude_deviceId",E="amplitude_optOut",I="amplitude_userId",x="amplitude_cookie_test",k="revenue_amount",O="$productId",T="$quantity",A="$price",j="$revenueType",P="amp_device_id",N="referrer",C="utm_source",R="utm_medium",D="utm_campaign",U="utm_term",L="utm_content",M=function(s){for(var e="",t=0;t<s.length;t++){var n=s.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},z=function(e){for(var s="",i=0,t=0,n=0,r=0;i<e.length;)(t=e.charCodeAt(i))<128?(s+=String.fromCharCode(t),i++):t>191&&t<224?(n=e.charCodeAt(i+1),s+=String.fromCharCode((31&t)<<6|63&n),i+=2):(n=e.charCodeAt(i+1),r=e.charCodeAt(i+2),s+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&r),i+=3);return s},F={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(input)))}catch(e){}return F._encode(input)},_encode:function(input){var e,t,n,r,o,c,l,output="",i=0;for(input=M(input);i<input.length;)r=(e=input.charCodeAt(i++))>>2,o=(3&e)<<4|(t=input.charCodeAt(i++))>>4,c=(15&t)<<2|(n=input.charCodeAt(i++))>>6,l=63&n,isNaN(t)?c=l=64:isNaN(n)&&(l=64),output=output+F._keyStr.charAt(r)+F._keyStr.charAt(o)+F._keyStr.charAt(c)+F._keyStr.charAt(l);return output},decode:function(input){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(input)))}catch(e){}return F._decode(input)},_decode:function(input){var e,t,n,r,o,c,output="",i=0;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)e=F._keyStr.indexOf(input.charAt(i++))<<2|(r=F._keyStr.indexOf(input.charAt(i++)))>>4,t=(15&r)<<4|(o=F._keyStr.indexOf(input.charAt(i++)))>>2,n=(3&o)<<6|(c=F._keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(e),64!==o&&(output+=String.fromCharCode(t)),64!==c&&(output+=String.fromCharCode(n));return output=z(output)}},B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},J=Object.prototype.toString;function K(e){switch(J.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":void 0!==n&&"function"==typeof n.isBuffer&&n.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":B(e)}var W,X={DISABLE:0,ERROR:1,WARN:2,INFO:3},H=X.WARN,V={error:function(s){H>=X.ERROR&&G(s)},warn:function(s){H>=X.WARN&&G(s)},info:function(s){H>=X.INFO&&G(s)}},G=function(s){try{console.log("[Amplitude] "+s)}catch(e){}},Q=function(e){return"string"===K(e)&&e.length>l?e.substring(0,l):e},Z=function(e){var t=K(e);if("object"!==t)return V.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>d)return V.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,c=K(o);"string"!==c&&(o=String(o),V.warn("WARNING: Non-string property key, received type "+c+', coercing to string "'+o+'"'));var l=ee(o,e[r]);null!==l&&(n[o]=l)}return n},Y=["null","nan","undefined","function","arguments","regexp","element"],ee=function e(t,n){var r=K(n);if(-1!==Y.indexOf(r))V.warn('WARNING: Property key "'+t+'" with invalid value type '+r+", ignoring"),n=null;else if("error"===r)n=String(n),V.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===r){for(var o=[],i=0;i<n.length;i++){var element=n[i],c=K(element);"array"!==c&&"object"!==c?o.push(e(t,element)):V.warn("WARNING: Cannot have "+c+" nested in an array property value, skipping")}n=o}else"object"===r&&(n=Z(n));return n},te=function(e,t){var n=K(t);if("string"===n)return t;if("date"===n||"number"===n||"boolean"===n)return t=String(t),V.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+t+'"'),t;if("array"===n){for(var r=[],i=0;i<t.length;i++){var element=t[i],o=K(element);"array"!==o&&"object"!==o?"string"===o?r.push(element):"date"!==o&&"number"!==o&&"boolean"!==o||(element=String(element),V.warn("WARNING: Non-string groupName, received type "+o+', coercing to string "'+element+'"'),r.push(element)):V.warn("WARNING: Skipping nested "+o+" in array groupName")}return r}V.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},ne=function(e){X.hasOwnProperty(e)&&(H=X[e])},re=V,ie=function(e){return!e||0===e.length},oe=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},se=function e(t){if("array"===K(t))for(var i=0;i<t.length;i++)t[i]=e(t[i]);else if("object"===K(t))for(var n in t)t.hasOwnProperty(n)&&(t[n]=e(t[n]));else t=Q(t);return t},ae=function(e){var t=K(e);if("object"!==t)return V.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,c=K(o);"string"!==c&&(o=String(o),V.warn("WARNING: Non-string groupType, received type "+c+', coercing to string "'+o+'"'));var l=te(o,e[r]);null!==l&&(n[o]=l)}return n},ue=function(input,e,t){return K(input)===t||(V.error("Invalid "+e+" input type. Expected "+t+" but received "+K(input)),!1)},ce=Z,le=function(e,t,n){var r=null!==t?n.expirationDays:-1;if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),r=o}var c=e+"="+t;r&&(c+="; expires="+r.toUTCString()),c+="; path=/",n.domain&&(c+="; domain="+n.domain),n.secure&&(c+="; Secure"),document.cookie=c},de=function(e){try{for(var t=document.cookie.split(";"),n=null,i=0;i<t.length;i++){for(var r=t[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e)){n=r.substring(e.length,r.length);break}}return n}catch(e){return null}},fe={expirationDays:void 0,domain:void 0},pe=function(e){var t=function(e){var a=document.createElement("a");return a.href=e,a.hostname||location.hostname}(e).split("."),n=t[t.length-1],r=[];if(4===t.length&&n===parseInt(n,10))return r;if(t.length<=1)return r;for(var i=t.length-2;i>=0;--i)r.push(t.slice(i).join("."));for(var o=0;o<r.length;++o){var c="__tld_test__",l=r[o],d={domain:"."+l};if(le(c,1,d),de(c))return le(c,null,d),l}return""},he=function(e){var t="";return fe.domain&&(t="."===fe.domain.charAt(0)?fe.domain.substring(1):fe.domain),e+t},ge=function(e){var t=he(e)+"=",n=de(t);try{if(n)return JSON.parse(F.decode(n))}catch(e){return null}return null},me=function(e,t){try{return le(he(e),F.encode(JSON.stringify(t)),fe),!0}catch(e){return!1}},ve=function(e){try{return le(he(e),null,fe),!0}catch(e){return!1}},ye={reset:function(){fe={expirationDays:void 0,domain:void 0}},options:function(e){if(0===arguments.length)return fe;e=e||{},fe.expirationDays=e.expirationDays,fe.secure=e.secure;var t=ie(e.domain)?"."+pe(window.location.href):e.domain,n=Math.random();fe.domain=t,me("amplitude_test",n);var r=ge("amplitude_test");return r&&r===n||(t=null),ve("amplitude_test"),fe.domain=t,fe},get:ge,set:me,remove:ve};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}return!1}())W=window.localStorage;else if(window.globalStorage)try{W=window.globalStorage[window.location.hostname]}catch(e){}else{var div=document.createElement("div"),be="localStorage";div.style.display="none",document.getElementsByTagName("head")[0].appendChild(div),div.addBehavior&&(div.addBehavior("#default#userdata"),W={length:0,setItem:function(e,t){div.load(be),div.getAttribute(e)||this.length++,div.setAttribute(e,t),div.save(be)},getItem:function(e){return div.load(be),div.getAttribute(e)},removeItem:function(e){div.load(be),div.getAttribute(e)&&this.length--,div.removeAttribute(e),div.save(be)},clear:function(){div.load(be);for(var e,i=0;e=div.XMLDocument.documentElement.attributes[i++];)div.removeAttribute(e.name);div.save(be),this.length=0},key:function(e){return div.load(be),div.XMLDocument.documentElement.attributes[e]}},div.load(be),W.length=div.XMLDocument.documentElement.attributes.length)}W||(W={length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}});var we=W,Se=function(){this.storage=null};Se.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return ye.set(x,t),e=ye.get(x)===t,ye.remove(x),e}catch(e){}return!1},Se.prototype.getStorage=function(){if(null!==this.storage)return this.storage;if(this._cookiesEnabled())this.storage=ye;else{this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:function(){this._options={expirationDays:void 0,domain:void 0,secure:!1}},options:function(e){return 0===arguments.length?this._options:(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname,this._options.secure=e.secure||!1)},get:function(e){try{return JSON.parse(we.getItem("amp_cookiestore_"+e))}catch(e){}return null},set:function(e,t){try{return we.setItem("amp_cookiestore_"+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function(e){try{we.removeItem("amp_cookiestore_"+e)}catch(e){return!1}}}}return this.storage};var _e=function(){this.userPropertiesOperations={},this.properties=[]};_e.prototype.add=function(e,t){return"number"===K(t)||"string"===K(t)?this._addOperation("$add",e,t):re.error("Unsupported type for value: "+K(t)+", expecting number or string"),this},_e.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},_e.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(this.userPropertiesOperations.hasOwnProperty("$clearAll")||re.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations.$clearAll="-",this)},_e.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},_e.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},_e.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},_e.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},_e.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty("$clearAll")?re.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):re.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var Ee=r(function(t){!function(e){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(q,a,b,e,s,t){return n((r=n(n(a,q),n(e,t)))<<(o=s)|r>>>32-o,b);var r,o}function o(a,b,e,t,n,s,o){return r(b&e|~b&t,a,b,n,s,o)}function c(a,b,e,t,n,s,o){return r(b&t|e&~t,a,b,n,s,o)}function l(a,b,e,t,n,s,o){return r(b^e^t,a,b,n,s,o)}function d(a,b,e,t,n,s,o){return r(e^(b|~t),a,b,n,s,o)}function f(e,t){var i,r,f,h,m;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var a=1732584193,b=-271733879,v=-1732584194,y=271733878;for(i=0;i<e.length;i+=16)r=a,f=b,h=v,m=y,a=o(a,b,v,y,e[i],7,-680876936),y=o(y,a,b,v,e[i+1],12,-389564586),v=o(v,y,a,b,e[i+2],17,606105819),b=o(b,v,y,a,e[i+3],22,-1044525330),a=o(a,b,v,y,e[i+4],7,-176418897),y=o(y,a,b,v,e[i+5],12,1200080426),v=o(v,y,a,b,e[i+6],17,-1473231341),b=o(b,v,y,a,e[i+7],22,-45705983),a=o(a,b,v,y,e[i+8],7,1770035416),y=o(y,a,b,v,e[i+9],12,-1958414417),v=o(v,y,a,b,e[i+10],17,-42063),b=o(b,v,y,a,e[i+11],22,-1990404162),a=o(a,b,v,y,e[i+12],7,1804603682),y=o(y,a,b,v,e[i+13],12,-40341101),v=o(v,y,a,b,e[i+14],17,-1502002290),a=c(a,b=o(b,v,y,a,e[i+15],22,1236535329),v,y,e[i+1],5,-165796510),y=c(y,a,b,v,e[i+6],9,-1069501632),v=c(v,y,a,b,e[i+11],14,643717713),b=c(b,v,y,a,e[i],20,-373897302),a=c(a,b,v,y,e[i+5],5,-701558691),y=c(y,a,b,v,e[i+10],9,38016083),v=c(v,y,a,b,e[i+15],14,-660478335),b=c(b,v,y,a,e[i+4],20,-405537848),a=c(a,b,v,y,e[i+9],5,568446438),y=c(y,a,b,v,e[i+14],9,-1019803690),v=c(v,y,a,b,e[i+3],14,-187363961),b=c(b,v,y,a,e[i+8],20,1163531501),a=c(a,b,v,y,e[i+13],5,-1444681467),y=c(y,a,b,v,e[i+2],9,-51403784),v=c(v,y,a,b,e[i+7],14,1735328473),a=l(a,b=c(b,v,y,a,e[i+12],20,-1926607734),v,y,e[i+5],4,-378558),y=l(y,a,b,v,e[i+8],11,-2022574463),v=l(v,y,a,b,e[i+11],16,1839030562),b=l(b,v,y,a,e[i+14],23,-35309556),a=l(a,b,v,y,e[i+1],4,-1530992060),y=l(y,a,b,v,e[i+4],11,1272893353),v=l(v,y,a,b,e[i+7],16,-155497632),b=l(b,v,y,a,e[i+10],23,-1094730640),a=l(a,b,v,y,e[i+13],4,681279174),y=l(y,a,b,v,e[i],11,-358537222),v=l(v,y,a,b,e[i+3],16,-722521979),b=l(b,v,y,a,e[i+6],23,76029189),a=l(a,b,v,y,e[i+9],4,-640364487),y=l(y,a,b,v,e[i+12],11,-421815835),v=l(v,y,a,b,e[i+15],16,530742520),a=d(a,b=l(b,v,y,a,e[i+2],23,-995338651),v,y,e[i],6,-198630844),y=d(y,a,b,v,e[i+7],10,1126891415),v=d(v,y,a,b,e[i+14],15,-1416354905),b=d(b,v,y,a,e[i+5],21,-57434055),a=d(a,b,v,y,e[i+12],6,1700485571),y=d(y,a,b,v,e[i+3],10,-1894986606),v=d(v,y,a,b,e[i+10],15,-1051523),b=d(b,v,y,a,e[i+1],21,-2054922799),a=d(a,b,v,y,e[i+8],6,1873313359),y=d(y,a,b,v,e[i+15],10,-30611744),v=d(v,y,a,b,e[i+6],15,-1560198380),b=d(b,v,y,a,e[i+13],21,1309151649),a=d(a,b,v,y,e[i+4],6,-145523070),y=d(y,a,b,v,e[i+11],10,-1120210379),v=d(v,y,a,b,e[i+2],15,718787259),b=d(b,v,y,a,e[i+9],21,-343485551),a=n(a,r),b=n(b,f),v=n(v,h),y=n(y,m);return[a,b,v,y]}function h(input){var i,output="",e=32*input.length;for(i=0;i<e;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function m(input){var i,output=[];for(output[(input.length>>2)-1]=void 0,i=0;i<output.length;i+=1)output[i]=0;var e=8*input.length;for(i=0;i<e;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function v(input){var e,i,output="";for(i=0;i<input.length;i+=1)e=input.charCodeAt(i),output+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return output}function y(input){return unescape(encodeURIComponent(input))}function w(s){return function(s){return h(f(m(s),8*s.length))}(y(s))}function S(e,t){return function(e,data){var i,t,n=m(e),r=[],o=[];for(r[15]=o[15]=void 0,n.length>16&&(n=f(n,8*e.length)),i=0;i<16;i+=1)r[i]=909522486^n[i],o[i]=1549556828^n[i];return t=f(r.concat(m(data)),512+8*data.length),h(f(o.concat(t),640))}(y(e),y(t))}function _(e,t,n){return t?n?S(t,e):v(S(t,e)):n?w(e):v(w(e))}t.exports?t.exports=_:e.md5=_}(e)}),Ie=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},xe=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Te=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,source){for(var t,n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var o in t=Object(arguments[s]))ke.call(t,o)&&(r[o]=t[o]);if(xe){n=xe(t);for(var i=0;i<n.length;i++)Oe.call(t,n[i])&&(r[n[i]]=t[n[i]])}}return r};function Ae(e,t){return t.encode?t.strict?Ie(e):encodeURIComponent(e):e}new RegExp("%[a-f0-9]{2}","gi"),new RegExp("(%[a-f0-9]{2})+","gi");var je=function(e,t){!1===(t=Te({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[Ae(t,e),"[",r,"]"].join(""):[Ae(t,e),"[",Ae(r,e),"]=",Ae(n,e)].join("")};case"bracket":return function(t,n){return null===n?Ae(t,e):[Ae(t,e),"[]=",Ae(n,e)].join("")};default:return function(t,n){return null===n?Ae(t,e):[Ae(t,e),"=",Ae(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map(function(r){var o=e[r];if(void 0===o)return"";if(null===o)return Ae(r,t);if(Array.isArray(o)){var c=[];return o.slice().forEach(function(e){void 0!==e&&c.push(n(r,e,c.length))}),c.join("&")}return Ae(r,t)+"="+Ae(o,t)}).filter(function(e){return e.length>0}).join("&"):""},Pe=function(e,data){this.url=e,this.data=data||{}};Pe.prototype.send=function(e){if(!!window.XDomainRequest){var t=new window.XDomainRequest;t.open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(je(this.data))}else{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(je(this.data))}};var Ne=function(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};Ne.prototype.setProductId=function(e){return"string"!==K(e)?re.error("Unsupported type for productId: "+K(e)+", expecting string"):ie(e)?re.error("Invalid empty productId"):this._productId=e,this},Ne.prototype.setQuantity=function(e){return"number"!==K(e)?re.error("Unsupported type for quantity: "+K(e)+", expecting number"):this._quantity=parseInt(e),this},Ne.prototype.setPrice=function(e){return"number"!==K(e)?re.error("Unsupported type for price: "+K(e)+", expecting number"):this._price=e,this},Ne.prototype.setRevenueType=function(e){return"string"!==K(e)?re.error("Unsupported type for revenueType: "+K(e)+", expecting string"):this._revenueType=e,this},Ne.prototype.setEventProperties=function(e){return"object"!==K(e)?re.error("Unsupported type for eventProperties: "+K(e)+", expecting object"):this._properties=ce(e),this},Ne.prototype._isValidRevenue=function(){return"number"===K(this._price)||(re.error("Invalid revenue, need to set price field"),!1)},Ne.prototype._toJSONObject=function(){var e="object"===K(this._properties)?this._properties:{};return null!==this._productId&&(e[O]=this._productId),null!==this._quantity&&(e[T]=this._quantity),null!==this._price&&(e[A]=this._price),null!==this._revenueType&&(e[j]=this._revenueType),e};var Ce=r(function(t,n){!function(e,r){var o="model",c="name",l="type",d="vendor",f="version",h="mobile",m="tablet",v={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.split(".")[0]:void 0}},y={rgx:function(){for(var e,t,n,p,q,r,o,i=0,c=arguments;i<c.length&&!r;){var l=c[i],d=c[i+1];if(void 0===e)for(p in e={},d)d.hasOwnProperty(p)&&("object"==typeof(q=d[p])?e[q[0]]=void 0:e[q]=void 0);for(t=n=0;t<l.length&&!r;)if(r=l[t++].exec(this.getUA()))for(p=0;p<d.length;p++)o=r[++n],"object"==typeof(q=d[p])&&q.length>0?2==q.length?"function"==typeof q[1]?e[q[0]]=q[1].call(this,o):e[q[0]]=q[1]:3==q.length?"function"!=typeof q[1]||q[1].exec&&q[1].test?e[q[0]]=o?o.replace(q[1],q[2]):void 0:e[q[0]]=o?q[1].call(this,o,q[2]):void 0:4==q.length&&(e[q[0]]=o?q[3].call(this,o.replace(q[1],q[2])):void 0):e[q]=o||void 0;i+=2}return e},str:function(e,map){for(var i in map)if("object"==typeof map[i]&&map[i].length>0){for(var t=0;t<map[i].length;t++)if(v.has(map[i][t],e))return"?"===i?void 0:i}else if(v.has(map[i],e))return"?"===i?void 0:i;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},S={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,f],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[c,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[c,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[c,f],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[c,"Chrome Mobile"],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[c,f],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[c,"UCBrowser"],f],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],f],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[f,[c,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[f,[c,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[f,[c,"Facebook"]],[/fxios\/([\w\.-]+)/i],[f,[c,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[f,y.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(blackberry)\\s?\/([\w\.]+)/i],[[c,"BlackBerry"],f],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,d,[l,m]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[d,"Apple"],[l,m]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[d,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,o,[l,m]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[d,"Amazon"],[l,m]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,y.str,w.device.amazon.model],[d,"Amazon"],[l,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,d,[l,h]],[/\((ip[honed|\s\w*]+);/i],[o,[d,"Apple"],[l,h]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,o,[l,h]],[/\(bb10;\s(\w+)/i],[o,[d,"BlackBerry"],[l,h]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[o,[d,"Asus"],[l,m]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[o,"Xperia Tablet"],[l,m]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[d,"Sony"],[o,"Xperia Phone"],[l,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,o,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[d,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[d,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[d,y.str,w.device.sprint.vendor],[o,y.str,w.device.sprint.model],[l,h]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[d,o,[l,m]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[d,[o,/_/g," "],[l,h]],[/(nexus\s9)/i],[o,[d,"HTC"],[l,m]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[d,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[d,"Microsoft"],[l,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[o,[d,"Motorola"],[l,h]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[d,"Motorola"],[l,m]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],o,[l,m]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[d,"Samsung"],o,[l,h]],[/(samsung);smarttv/i],[d,o,[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[d,"Sharp"],[l,"smarttv"]],[/sie-(\w+)*/i],[o,[d,"Siemens"],[l,h]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[d,"Nokia"],o,[l,h]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[d,"Acer"],[l,m]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],o,[l,m]],[/(lg) netcast\.tv/i],[d,o,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[d,"LG"],[l,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[d,"Lenovo"],[l,m]],[/linux;.+((jolla));/i],[d,o,[l,h]],[/((pebble))app\/[\d\.]+\s/i],[d,o,[l,"wearable"]],[/android.+;\s(glass)\s\d/i],[o,[d,"Google"],[l,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[d,"Xiaomi"],[l,h]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[l,v.lowerize],d,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,f],[/rv\:([\w\.]+).*(gecko)/i],[f,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[c,y.str,w.os.windows.name],[f,y.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[f,y.str,w.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[c,f],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[c,"Symbian"],f],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[c,"Linux"],f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[c,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[c,"Linux"],f],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[c,"iPhone"],[f,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[c,"iPad"],[f,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[c,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[c,f]]},_=function(t,n){if(!(this instanceof _))return new _(t,n).getResult();var r=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=n?v.extend(S,n):S;return this.getBrowser=function(){var e=y.rgx.apply(this,o.browser);return e.major=v.major(e.version),e},this.getCPU=function(){return y.rgx.apply(this,o.cpu)},this.getDevice=function(){return y.rgx.apply(this,o.device)},this.getEngine=function(){return y.rgx.apply(this,o.engine)},this.getOS=function(){return y.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};_.VERSION="0.7.10",_.BROWSER={NAME:c,MAJOR:"major",VERSION:f},_.CPU={ARCHITECTURE:"architecture"},_.DEVICE={MODEL:o,VENDOR:d,TYPE:l,CONSOLE:"console",MOBILE:h,SMARTTV:"smarttv",TABLET:m,WEARABLE:"wearable",EMBEDDED:"embedded"},_.ENGINE={NAME:c,VERSION:f},_.OS={NAME:c,VERSION:f},t.exports&&(n=t.exports=_),n.UAParser=_;var E=e.jQuery||e.Zepto;if(void 0!==E){var I=new _;E.ua=I.getResult(),E.ua.get=function(){return I.getUA()},E.ua.set=function(e){I.setUA(e);var t=I.getResult();for(var n in t)E.ua[n]=t[n]}}}("object"==typeof window?window:e)}),Re=(Ce.UAParser,function e(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}),De={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:3650,cookieName:"amplitude_id",deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:{language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0}.language,logLevel:"WARN",optOut:!1,platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:18e5,trackingOptions:{city:!0,country:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100},Ue=function(e){this._instanceName=ie(e)?o:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===o?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new Ce(navigator.userAgent).getResult(),this.options=$({},De,{trackingOptions:$({},De.trackingOptions)}),this.cookieStorage=(new Se).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._onInit=[],this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null};Ue.prototype.Identify=_e,Ue.prototype.Revenue=Ne,Ue.prototype.init=function(e,t,n,r){if("string"!==K(e)||ie(e))re.error("Invalid apiKey. Please re-initialize with a valid apiKey");else{try{this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,Le(this.options,n),"string"===K(this.options.logLevel)&&ne(this.options.logLevel);var c=Ke(this);if(this._apiPropertiesTrackingOptions=Object.keys(c).length>0?{tracking_options:c}:{},this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===o&&qe(this),Me(this),this.options.deviceId="object"===K(n)&&"string"===K(n.deviceId)&&!ie(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||Re()+"R",this.options.userId="string"===K(t)&&!ie(t)&&t||"number"===K(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var i=0;i<this._unsentEvents.length;i++){var l=this._unsentEvents[i].event_properties,d=this._unsentEvents[i].groups;this._unsentEvents[i].event_properties=ce(l),this._unsentEvents[i].groups=ae(d)}for(var f=0;f<this._unsentIdentifys.length;f++){var h=this._unsentIdentifys[f].user_properties,m=this._unsentIdentifys[f].groups;this._unsentIdentifys[f].user_properties=ce(h),this._unsentIdentifys[f].groups=ae(m)}}var v=(new Date).getTime();(!this._sessionId||!this._lastEventTime||v-this._lastEventTime>this.options.sessionTimeout)&&(this.options.unsetParamsReferrerOnNewSession&&this._unsetUTMParams(),this._newSession=!0,this._sessionId=v,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=v,Fe(this),this._sendEventsIfReady()}catch(e){re.error(e)}finally{"function"===K(r)&&r(this)}for(var y=0;y<this._onInit.length;y++)this._onInit[y]()}},Ue.prototype._trackParamsAndReferrer=function(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var Le=function e(t,n){if("object"===K(n)){var r=function(r){if(t.hasOwnProperty(r)){var o=n[r],c=K(t[r]);ue(o,r+" option",c)&&("boolean"===c?t[r]=!!o:"string"===c&&!ie(o)||"number"===c&&o>0?t[r]=o:"object"===c&&e(t[r],o))}};for(var o in n)n.hasOwnProperty(o)&&r(o)}};Ue.prototype.runQueuedFunctions=function(){for(var i=0;i<this._q.length;i++){var e=this[this._q[i][0]];"function"===K(e)&&e.apply(this,this._q[i].slice(1))}this._q=[]},Ue.prototype._apiKeySet=function(e){return!ie(this.options.apiKey)||(re.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},Ue.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(we,e),n=this._parseSavedUnsentEventsString(t,e),r=this._getFromStorageLegacy(we,e),o=this._parseSavedUnsentEventsString(r,e).concat(n);return this._removeFromLegacyStorage(we,e),this._setInStorage(we,e,JSON.stringify(o)),o},Ue.prototype._removeFromLegacyStorage=function(e,t){e.removeItem(t+this._legacyStorageSuffix)},Ue.prototype._parseSavedUnsentEventsString=function(e,t){if(ie(e))return[];if("string"===K(e))try{var n=JSON.parse(e);if("array"===K(n))return n}catch(e){}return re.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},Ue.prototype.isNewSession=function(){return this._newSession},Ue.prototype.onInit=function(e){this._onInit.push(e)},Ue.prototype.getSessionId=function(){return this._sessionId},Ue.prototype.nextEventId=function(){return this._eventId++,this._eventId},Ue.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},Ue.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},Ue.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},Ue.prototype._sendEventsIfReady=function(e){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(e),!0))},Ue.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},Ue.prototype._getFromStorageLegacy=function(e,t){return e.getItem(t+this._legacyStorageSuffix)},Ue.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var qe=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"!==K(t)&&!("object"===K(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix))&&t.deviceId&&t.sessionId&&t.lastEventTime)){var n=function(e){var t=we.getItem(e);return we.removeItem(e),t},r="string"===K(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",o=n(_+r),c=n(I+r),l=n(E+r);null!=l&&(l="true"===String(l));var d=parseInt(n(S)),f=parseInt(n(v)),h=parseInt(n(m)),x=parseInt(n(y)),k=parseInt(n(w)),O=function(e){return"object"===K(t)&&t[e]};e.options.deviceId=O("deviceId")||o,e.options.userId=O("userId")||c,e._sessionId=O("sessionId")||d||e._sessionId,e._lastEventTime=O("lastEventTime")||f||e._lastEventTime,e._eventId=O("eventId")||h||e._eventId,e._identifyId=O("identifyId")||x||e._identifyId,e._sequenceNumber=O("sequenceNumber")||k||e._sequenceNumber,e.options.optOut=l||!1,t&&void 0!==t.optOut&&null!==t.optOut&&(e.options.optOut="true"===String(t.optOut)),Fe(e)}},Me=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"===K(t))ze(e,t);else{var n=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix);"object"===K(n)&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),ze(e,n))}},ze=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},Fe=function(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};Ue.prototype._initUtmData=function(e,t){e=e||this._getUrlParams(),t=t||this.cookieStorage.get("__utmz");var n,r,o,c,l,d,f,h,m,v,y,w=(r=e,o=(n=t)?"?"+n.split(".").slice(-1)[0].replace(/\|/g,"&"):"",l=(c=function(e,t,n,r){return oe(e,t)||oe(n,r)})(C,r,"utmcsr",o),d=c(R,r,"utmcmd",o),f=c(D,r,"utmccn",o),h=c(U,r,"utmctr",o),m=c(L,r,"utmcct",o),v={},(y=function(e,t){ie(t)||(v[e]=t)})(C,l),y(R,d),y(D,f),y(U,h),y(L,m),v);Be(this,w)},Ue.prototype._unsetUTMParams=function(){var e=new _e;e.unset(N),e.unset(C),e.unset(R),e.unset(D),e.unset(U),e.unset(L),this.identify(e)};var Be=function(e,t){if("object"===K(t)&&0!==Object.keys(t).length){var n=new _e;for(var r in t)t.hasOwnProperty(r)&&(n.setOnce("initial_"+r,t[r]),n.set(r,t[r]));e.identify(n)}};Ue.prototype._getReferrer=function(){return document.referrer},Ue.prototype._getUrlParams=function(){return location.search},Ue.prototype._saveGclid=function(e){var t=oe("gclid",e);ie(t)||Be(this,{gclid:t})},Ue.prototype._getDeviceIdFromUrlParam=function(e){return oe(P,e)},Ue.prototype._getReferringDomain=function(e){if(ie(e))return null;var t=e.split("/");return t.length>=3?t[2]:null},Ue.prototype._saveReferrer=function(e){if(!ie(e)){var t={referrer:e,referring_domain:this._getReferringDomain(e)};Be(this,t)}},Ue.prototype.saveEvents=function(){try{this._setInStorage(we,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(we,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},Ue.prototype.setDomain=function(e){if(ue(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,Me(this),Fe(this)}catch(e){re.error(e)}},Ue.prototype.setUserId=function(e){try{this.options.userId=null!=e&&""+e||null,Fe(this)}catch(e){re.error(e)}},Ue.prototype.setGroup=function(e,t){if(this._apiKeySet("setGroup()")&&ue(e,"groupType","string")&&!ie(e)){var n={};n[e]=t;var r=(new _e).set(e,t);this._logEvent(f,null,null,r.userPropertiesOperations,n,null,null,null)}},Ue.prototype.setOptOut=function(e){if(ue(e,"enable","boolean"))try{this.options.optOut=e,Fe(this)}catch(e){re.error(e)}},Ue.prototype.setSessionId=function(e){if(ue(e,"sessionId","number"))try{this._sessionId=e,Fe(this)}catch(e){re.error(e)}},Ue.prototype.resetSessionId=function(){this.setSessionId((new Date).getTime())},Ue.prototype.regenerateDeviceId=function(){this.setDeviceId(Re()+"R")},Ue.prototype.setDeviceId=function(e){if(ue(e,"deviceId","string"))try{ie(e)||(this.options.deviceId=""+e,Fe(this))}catch(e){re.error(e)}},Ue.prototype.setUserProperties=function(e){if(this._apiKeySet("setUserProperties()")&&ue(e,"userProperties","object")){var t=se(ce(e));if(0!==Object.keys(t).length){var n=new _e;for(var r in t)t.hasOwnProperty(r)&&n.set(r,t[r]);this.identify(n)}}},Ue.prototype.clearUserProperties=function(){if(this._apiKeySet("clearUserProperties()")){var e=new _e;e.clearAll(),this.identify(e)}};var $e=function(e,t){for(var i=0;i<t._q.length;i++){var n=e[t._q[i][0]];"function"===K(n)&&n.apply(e,t._q[i].slice(1))}return e};Ue.prototype.identify=function(e,t){if(this._apiKeySet("identify()"))if("object"===K(e)&&e.hasOwnProperty("_q")&&(e=$e(new _e,e)),e instanceof _e){if(Object.keys(e.userPropertiesOperations).length>0)return this._logEvent(f,null,null,e.userPropertiesOperations,null,null,null,t);"function"===K(t)&&t(0,"No request sent",{reason:"No user property operations"})}else re.error("Invalid identify input type. Expected Identify object but saw "+K(e)),"function"===K(t)&&t(0,"No request sent",{reason:"Invalid identify input type"});else"function"===K(t)&&t(0,"No request sent",{reason:"API key is not set"})},Ue.prototype.groupIdentify=function(e,t,n,r){var o,c,l;if(this._apiKeySet("groupIdentify()"))if(ue(e,"group_type","string")&&!ie(e))if(null!=t)if("object"===K(n)&&n.hasOwnProperty("_q")&&(n=$e(new _e,n)),n instanceof _e){if(Object.keys(n.userPropertiesOperations).length>0)return this._logEvent(h,null,null,null,(l=t,(c=e)in(o={})?Object.defineProperty(o,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[c]=l,o),n.userPropertiesOperations,null,r);"function"===K(r)&&r(0,"No request sent",{reason:"No group property operations"})}else re.error("Invalid identify input type. Expected Identify object but saw "+K(n)),"function"===K(r)&&r(0,"No request sent",{reason:"Invalid identify input type"});else"function"===K(r)&&r(0,"No request sent",{reason:"Invalid group name"});else"function"===K(r)&&r(0,"No request sent",{reason:"Invalid group type"});else"function"===K(r)&&r(0,"No request sent",{reason:"API key is not set"})},Ue.prototype.setVersionName=function(e){ue(e,"versionName","string")&&(this.options.versionName=e)},Ue.prototype._logEvent=function(e,t,n,r,o,c,l,d){if(Me(this),e)if(this.options.optOut)"function"===K(d)&&d(0,"No request sent",{reason:"optOut is set to true"});else try{var m;m=e===f||e===h?this.nextIdentifyId():this.nextEventId();var v=this.nextSequenceNumber(),y="number"===K(l)?l:(new Date).getTime();(!this._sessionId||!this._lastEventTime||y-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=y),this._lastEventTime=y,Fe(this),r=r||{};var w=$({},this._apiPropertiesTrackingOptions);n=$({},n||{},w),t=t||{},o=o||{},c=c||{};var S={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:y,event_id:m,session_id:this._sessionId||-1,event_type:e,version_name:Je(this,"version_name")&&this.options.versionName||null,platform:Je(this,"platform")?this.options.platform:null,os_name:Je(this,"os_name")&&this._ua.browser.name||null,os_version:Je(this,"os_version")&&this._ua.browser.major||null,device_model:Je(this,"device_model")&&this._ua.os.name||null,language:Je(this,"language")?this.options.language:null,api_properties:n,event_properties:se(ce(t)),user_properties:se(ce(r)),uuid:Re(),library:{name:"amplitude-js",version:"4.7.0"},sequence_number:v,groups:se(ae(o)),group_properties:se(ce(c)),user_agent:this._userAgent};return e===f||e===h?(this._unsentIdentifys.push(S),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(S),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(d)||"function"!==K(d)||d(0,"No request sent",{reason:"No events to send or upload queued"}),m}catch(e){re.error(e)}else"function"===K(d)&&d(0,"No request sent",{reason:"Missing eventType"})};var Je=function(e,t){return!!e.options.trackingOptions[t]},Ke=function(e){for(var t=["city","country","dma","ip_address","region"],n={},i=0;i<t.length;i++){var r=t[i];Je(e,r)||(n[r]=!1)}return n};Ue.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},Ue.prototype.logEvent=function(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},Ue.prototype.logEventWithTimestamp=function(e,t,n,r){return this._apiKeySet("logEvent()")?ue(e,"eventType","string")?ie(e)?("function"===K(r)&&r(0,"No request sent",{reason:"Missing eventType"}),-1):this._logEvent(e,t,null,null,null,null,n,r):("function"===K(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===K(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)},Ue.prototype.logEventWithGroups=function(e,t,n,r){return this._apiKeySet("logEventWithGroups()")?ue(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,null,r):("function"===K(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===K(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)};var We=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};Ue.prototype.logRevenueV2=function(e){if(this._apiKeySet("logRevenueV2()"))if("object"===K(e)&&e.hasOwnProperty("_q")&&(e=$e(new Ne,e)),e instanceof Ne){if(e&&e._isValidRevenue())return this.logEvent(k,e._toJSONObject())}else re.error("Invalid revenue input type. Expected Revenue object but saw "+K(e))},Ue.prototype.logRevenue=function(e,t,n){return this._apiKeySet("logRevenue()")&&We(e)&&(void 0===t||We(t))?this._logEvent(k,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null,null):-1},Ue.prototype.removeEvents=function(e,t){Xe(this,"_unsentEvents",e),Xe(this,"_unsentIdentifys",t)};var Xe=function(e,t,n){if(!(n<0)){for(var r=[],i=0;i<e[t].length;i++)e[t][i].event_id>n&&r.push(e[t][i]);e[t]=r}};Ue.prototype.sendEvents=function(e){if(this._apiKeySet("sendEvents()"))if(this.options.optOut)"function"===K(e)&&e(0,"No request sent",{reason:"optOut is set to true"});else if(0!==this._unsentCount())if(this._sending)"function"===K(e)&&e(0,"No request sent",{reason:"Request already in progress"});else{this._sending=!0;var t=(this.options.forceHttps?"https":"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",n=Math.min(this._unsentCount(),this.options.uploadBatchSize),r=this._mergeEventsAndIdentifys(n),o=r.maxEventId,l=r.maxIdentifyId,d=JSON.stringify(r.eventsToSend),f=(new Date).getTime(),data={client:this.options.apiKey,e:d,v:c,upload_time:f,checksum:Ee(c+this.options.apiKey+d+f)},h=this;new Pe(t,data).send(function(t,r){h._sending=!1;try{200===t&&"success"===r?(h.removeEvents(o,l),h.options.saveEvents&&h.saveEvents(),h._sendEventsIfReady(e)||"function"!==K(e)||e(t,r)):413===t?(1===h.options.uploadBatchSize&&h.removeEvents(o,l),h.options.uploadBatchSize=Math.ceil(n/2),h.sendEvents(e)):"function"===K(e)&&e(t,r)}catch(e){}})}else"function"===K(e)&&e(0,"No request sent",{reason:"No events to send"});else"function"===K(e)&&e(0,"No request sent",{reason:"API key not set"})},Ue.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,r=-1,o=0,c=-1;t.length<e;){var l,d=o>=this._unsentIdentifys.length,f=n>=this._unsentEvents.length;if(f&&d){re.error("Merging Events and Identifys, less events and identifys than expected");break}d?r=(l=this._unsentEvents[n++]).event_id:f?c=(l=this._unsentIdentifys[o++]).event_id:!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[o].sequence_number?r=(l=this._unsentEvents[n++]).event_id:c=(l=this._unsentIdentifys[o++]).event_id,t.push(l)}return{eventsToSend:t,maxEventId:r,maxIdentifyId:c}},Ue.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},Ue.prototype.__VERSION__="4.7.0";var He=function(){this.options=$({},De),this._q=[],this._instances={}};He.prototype.Identify=_e,He.prototype.Revenue=Ne,He.prototype.getInstance=function(e){e=ie(e)?o:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new Ue(e),this._instances[e]=t),t},He.prototype.runQueuedFunctions=function(){for(var i=0;i<this._q.length;i++){var e=this[this._q[i][0]];"function"===K(e)&&e.apply(this,this._q[i].slice(1))}for(var t in this._q=[],this._instances)this._instances.hasOwnProperty(t)&&this._instances[t].runQueuedFunctions()},He.prototype.init=function(e,t,n,r){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===K(r)&&r(e)}.bind(this))},He.prototype.isNewSession=function(){return this.getInstance().isNewSession()},He.prototype.getSessionId=function(){return this.getInstance().getSessionId()},He.prototype.nextEventId=function(){return this.getInstance().nextEventId()},He.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},He.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},He.prototype.saveEvents=function(){this.getInstance().saveEvents()},He.prototype.setDomain=function(e){this.getInstance().setDomain(e)},He.prototype.setUserId=function(e){this.getInstance().setUserId(e)},He.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},He.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},He.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},He.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},He.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},He.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},He.prototype.identify=function(e,t){this.getInstance().identify(e,t)},He.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},He.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},He.prototype.logEventWithGroups=function(e,t,n,r){return this.getInstance().logEventWithGroups(e,t,n,r)},He.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},He.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},He.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},He.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},He.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},He.prototype.__VERSION__="4.7.0";var Ve=window.amplitude||{},Ge=new He;for(var Qe in Ge._q=Ve._q||[],Ve._iq)Ve._iq.hasOwnProperty(Qe)&&(Ge.getInstance(Qe)._q=Ve._iq[Qe]._q||[]);return Ge},e.exports=r()}).call(this,n(86),n(1630).Buffer)},1631:function(e,t,n){"use strict";t.byteLength=function(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=d(e),r=n[0],l=n[1],f=new c(function(e,t,n){return 3*(t+n)/4-n}(0,r,l)),h=0,m=l>0?r-4:r,i=0;i<m;i+=4)t=o[e.charCodeAt(i)]<<18|o[e.charCodeAt(i+1)]<<12|o[e.charCodeAt(i+2)]<<6|o[e.charCodeAt(i+3)],f[h++]=t>>16&255,f[h++]=t>>8&255,f[h++]=255&t;2===l&&(t=o[e.charCodeAt(i)]<<2|o[e.charCodeAt(i+1)]>>4,f[h++]=255&t);1===l&&(t=o[e.charCodeAt(i)]<<10|o[e.charCodeAt(i+1)]<<4|o[e.charCodeAt(i+2)]>>2,f[h++]=t>>8&255,f[h++]=255&t);return f},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,c=[],i=0,l=n-o;i<l;i+=16383)c.push(f(e,i,i+16383>l?l:i+16383));1===o?(t=e[n-1],c.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],c.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return c.join("")};for(var r=[],o=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,l=code.length;i<l;++i)r[i]=code[i],o[code.charCodeAt(i)]=i;function d(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function f(e,t,n){for(var o,c,output=[],i=t;i<n;i+=3)o=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),output.push(r[(c=o)>>18&63]+r[c>>12&63]+r[c>>6&63]+r[63&c]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},1939:function(e,t,n){e.exports=n(1327)},779:function(e,t,n){(function(t){var a,b,n;!function(a){function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function e(a){return void 0===a}if(a){var t={},n=a.TraceKit,r=[].slice,g="?";t.noConflict=function(){return a.TraceKit=n,t},t.wrap=function(a){return function(){try{return a.apply(this,arguments)}catch(e){throw t.report(e),e}}},t.report=function(){function e(a,e,n){var r=null;if(!e||t.collectWindowErrors){for(var g in l)if(b(l,g))try{l[g](a,e,n)}catch(e){r=e}if(r)throw r}}function g(a,b,n,r,g){if(f)t.computeStackTrace.augmentStackTraceWithInitialElement(f,b,n,a),i();else if(g)e(t.computeStackTrace(g),!0,g);else{var c={url:b,line:n,column:r};c.func=t.computeStackTrace.guessFunctionName(c.url,c.line),c.context=t.computeStackTrace.gatherContext(c.url,c.line),e({mode:"onerror",message:a,stack:[c]},!0,null)}return!!o&&o.apply(this,arguments)}function n(){!0!==c&&(o=a.onerror,a.onerror=g,c=!0)}function i(){var a=f,b=d;f=null,d=null,e(a,!1,b)}function r(b){if(f){if(d===b)return;i()}var e=t.computeStackTrace(b);throw f=e,d=b,a.setTimeout(function(){d===b&&i()},e.incomplete?2e3:0),b}var o,c,l=[],d=null,f=null;return r.subscribe=function(a){n(),l.push(a)},r.unsubscribe=function(a){for(var b=l.length-1;b>=0;--b)l[b]===a&&l.splice(b,1)},r}(),t.computeStackTrace=function(){function n(e){if("string"!=typeof e)return[];if(!b(w,e)){var t="",n="";try{n=a.document.domain}catch(e){}var r=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(e);r&&r[2]===n&&(t=function(a){return"string"!=typeof a?[]:""}(e)),w[e]=t?t.split("\n"):[]}return w[e]}function r(a,b){var t,r=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",c=n(a);if(!c.length)return g;for(var l=0;10>l;++l)if(!e(i=c[b-l]+i)){if(t=o.exec(i))return t[1];if(t=r.exec(i))return t[1]}return g}function i(a,b){var r=n(a);if(!r.length)return null;var g=[],o=Math.floor(t.linesOfContext/2),i=o+t.linesOfContext%2,c=Math.max(0,b-o-1),l=Math.min(r.length,b+i-1);b-=1;for(var d=c;l>d;++d)e(r[d])||g.push(r[d]);return g.length>0?g:null}function o(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(a){return o(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function l(a,b){for(var e,t,r=0,g=b.length;g>r;++r)if((e=n(b[r])).length&&(e=e.join("\n"),t=a.exec(e)))return{url:b[r],line:e.substring(0,t.index).split("\n").length,column:t.index-e.lastIndexOf("\n",t.index)-1};return null}function d(a,b,e){var t,r=n(b),g=new RegExp("\\b"+o(a)+"\\b");return e-=1,r&&r.length>e&&(t=g.exec(r[e]))?t.index:null}function f(b){if(!e(a&&a.document)){for(var t,n,r,g,d=[a.location.href],i=a.document.getElementsByTagName("script"),f=""+b,p=0;p<i.length;++p){var q=i[p];q.src&&d.push(q.src)}if(r=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(f)){var h=r[1]?"\\s+"+r[1]:"",s=r[2].split(",").join("\\s*,\\s*");t=o(r[3]).replace(/;$/,";?"),n=new RegExp("function"+h+"\\s*\\(\\s*"+s+"\\s*\\)\\s*{\\s*"+t+"\\s*}")}else n=new RegExp(o(f).replace(/\s+/g,"\\s+"));if(g=l(n,d))return g;if(r=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(f)){var m=r[1];if(t=c(r[2]),g=l(n=new RegExp("on"+m+"=[\\'\"]\\s*"+t+"\\s*[\\'\"]","i"),d[0]))return g;if(g=l(n=new RegExp(t),d))return g}return null}}function h(a){if(!a.stack)return null;for(var b,t,n=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,l=a.stack.split("\n"),f=[],h=/^(.*) is undefined$/.exec(a.message),m=0,p=l.length;p>m;++m){if(b=n.exec(l[m])){var q=b[2]&&-1!==b[2].indexOf("native");t={url:q?null:b[2],func:b[1]||g,args:q?[b[2]]:[],line:b[3]?+b[3]:null,column:b[4]?+b[4]:null}}else if(b=c.exec(l[m]))t={url:b[2],func:b[1]||g,args:[],line:+b[3],column:b[4]?+b[4]:null};else{if(!(b=o.exec(l[m])))continue;t={url:b[3],func:b[1]||g,args:b[2]?b[2].split(","):[],line:b[4]?+b[4]:null,column:b[5]?+b[5]:null}}!t.func&&t.line&&(t.func=r(t.url,t.line)),t.line&&(t.context=i(t.url,t.line)),f.push(t)}return f.length?(f[0]&&f[0].line&&!f[0].column&&h?f[0].column=d(h[1],f[0].url,f[0].line):f[0].column||e(a.columnNumber)||(f[0].column=a.columnNumber+1),{mode:"stack",name:a.name,message:a.message,stack:f}):null}function q(e){var t=e.message.split("\n");if(t.length<4)return null;var o,g=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,f=/^\s*Line (\d+) of function script\s*$/i,h=[],m=a&&a.document&&a.document.getElementsByTagName("script"),p=[];for(var q in m)b(m,q)&&!m[q].src&&p.push(m[q]);for(var v=2;v<t.length;v+=2){var s=null;if(o=g.exec(t[v]))s={url:o[2],func:o[3],args:[],line:+o[1],column:null};else if(o=d.exec(t[v])){s={url:o[3],func:o[4],args:[],line:+o[1],column:null};var y=+o[1],u=p[o[2]-1];if(u){var w=n(s.url);if(w){var S=(w=w.join("\n")).indexOf(u.innerText);S>=0&&(s.line=y+w.substring(0,S).split("\n").length)}}}else if(o=f.exec(t[v])){var _=a.location.href.replace(/#.*$/,""),E=l(new RegExp(c(t[v+1])),[_]);s={url:_,func:"",args:[],line:E?E.line:o[1],column:null}}if(s){s.func||(s.func=r(s.url,s.line));var I=i(s.url,s.line),x=I?I[Math.floor(I.length/2)]:null;s.context=I&&x.replace(/^\s*/,"")===t[v+1].replace(/^\s*/,"")?I:[t[v+1]],h.push(s)}}return h.length?{mode:"multiline",name:e.name,message:t[0],stack:h}:null}function m(a,b,e,t){var n={url:b,line:e};if(n.url&&n.line){a.incomplete=!1,n.func||(n.func=r(n.url,n.line)),n.context||(n.context=i(n.url,n.line));var o=/ '([^']+)' /.exec(t);if(o&&(n.column=d(o[1],n.url,n.line)),a.stack.length>0&&a.stack[0].url===n.url){if(a.stack[0].line===n.line)return!1;if(!a.stack[0].line&&a.stack[0].func===n.func)return a.stack[0].line=n.line,a.stack[0].context=n.context,!1}return a.stack.unshift(n),a.partial=!0,!0}return a.incomplete=!0,!1}function s(a,b){for(var e,n,o,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],l={},h=!1,y=s.caller;y&&!h;y=y.caller)if(y!==v&&y!==t.report){if(n={url:null,func:g,args:[],line:null,column:null},y.name?n.func=y.name:(e=i.exec(y.toString()))&&(n.func=e[1]),void 0===n.func)try{n.func=e.input.substring(0,e.input.indexOf("{"))}catch(e){}if(o=f(y)){n.url=o.url,n.line=o.line,n.func===g&&(n.func=r(n.url,n.line));var q=/ '([^']+)' /.exec(a.message||a.description);q&&(n.column=d(q[1],o.url,o.line))}l[""+y]?h=!0:l[""+y]=!0,c.push(n)}b&&c.splice(0,b);var u={mode:"callers",name:a.name,message:a.message,stack:c};return m(u,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),u}function v(a,b){var e=null;b=null==b?0:+b;try{if(e=function(a){var b=a.stacktrace;if(b){for(var e,t=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,n=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=b.split("\n"),g=[],c=0;c<o.length;c+=2){var l=null;if((e=t.exec(o[c]))?l={url:e[2],line:+e[1],column:null,func:e[3],args:[]}:(e=n.exec(o[c]))&&(l={url:e[6],line:+e[1],column:+e[2],func:e[3]||e[4],args:e[5]?e[5].split(","):[]}),l){if(!l.func&&l.line&&(l.func=r(l.url,l.line)),l.line)try{l.context=i(l.url,l.line)}catch(e){}l.context||(l.context=[o[c+1]]),g.push(l)}}return g.length?{mode:"stacktrace",name:a.name,message:a.message,stack:g}:null}}(a))return e}catch(e){if(y)throw e}try{if(e=h(a))return e}catch(e){if(y)throw e}try{if(e=q(a))return e}catch(e){if(y)throw e}try{if(e=s(a,b+1))return e}catch(e){if(y)throw e}return{mode:"failed"}}var y=!1,w={};return v.augmentStackTraceWithInitialElement=m,v.guessFunctionName=r,v.gatherContext=i,v.ofCaller=function(a){a=1+(null==a?0:+a);try{throw new Error}catch(e){return v(e,a+1)}},v.getSource=n,v}(),t.extendToAsynchronousCallbacks=function(){var b=function(b){var e=a[b];a[b]=function(){var a=r.call(arguments),b=a[0];return"function"==typeof b&&(a[0]=t.wrap(b)),e.apply?e.apply(this,a):e(a[0],a[1])}};b("setTimeout"),b("setInterval")},t.remoteFetching||(t.remoteFetching=!0),t.collectWindowErrors||(t.collectWindowErrors=!0),(!t.linesOfContext||t.linesOfContext<1)&&(t.linesOfContext=11),a.TraceKit=t}}("undefined"!=typeof window?window:t),function(a,b){"use strict";if(a&&a.event&&a.event.add){var e=a.event.add;a.event.add=function(t,n,r,g,o){return"function"!=typeof r&&"function"!=typeof r.handler?e.call(this,t,n,r,g,o):(r.handler?(i=r.handler,r.handler=b.wrap(r.handler)):(i=r,r=b.wrap(r)),r.guid=i.guid?i.guid:i.guid=a.guid++,e.call(this,t,n,r,g,o));var i};var t=a.fn.ready;a.fn.ready=function(a){return t.call(this,b.wrap(a))};var n=a.ajax;a.ajax=function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};for(var r,g=["complete","error","success"];r=g.pop();)a.isFunction(t[r])&&(t[r]=b.wrap(t[r]));try{return e?n.call(this,e,t):n.call(this,t)}catch(e){throw b.report(e),e}}}}(window.jQuery,window.TraceKit),function(a,b,n,r){function i(a,b,e,t){if(0!==b.status&&b.getAllResponseHeaders()){var n="AJAX Error: "+(b.statusText||"unknown")+" "+(e.type||"unknown")+" "+(function(a){var b=a,e=a.split("//")[1];if(e){var t=e.indexOf("?"),n=e.toString().substring(0,t),r=n.split("/").slice(0,4).join("/"),g=n.substring(0,48);(b=r.length<g.length?r:g)!==n&&(b+="..")}return b}(e.url)||"unknown");re.send(t||a.type,{status:b.status,statusText:b.statusText,type:e.type,url:e.url,ajaxErrorMessage:n,contentType:e.contentType,requestData:e.data&&e.data.slice?e.data.slice(0,10240):r,responseData:b.responseText&&b.responseText.slice?b.responseText.slice(0,10240):r,activeTarget:a.target&&a.target.activeElement&&a.target.activeElement.outerHTML&&a.target.activeElement.outerHTML.slice?a.target.activeElement.outerHTML.slice(0,10240):r})}}function o(a){if(Y.log("Atatus: Caught unhandled promise rejection:",a),a){var b=a.reason;re.notify(b&&(b instanceof Error||b.message)?b:new Error("UnhandledRejection: "+b))}}function c(){return!(!h||""===h)||(Y.log("Atatus API key has not been configured, make sure you call atatus.config(yourApiKey)"),!1)}function l(){try{return"localStorage"in a&&null!==a.localStorage}catch(e){return!1}}function q(){try{if(l()&&localStorage.length>0)for(var a in localStorage)if("atatusjs="===a.substring(0,9)){try{var b=JSON.parse(localStorage[a]);"apikey"in b&&f(G,b)}catch(e){Y.log("Atatus: Invalid JSON object in LocalStorage")}localStorage.removeItem(a)}}catch(e){Y.log("Atatus sendSavedErrors: LocalStorage read failed!",e)}}function d(a,e){if(e=Y.isObject(e)?e:{},a.stack&&a.stack.length){var t=e.customData&&e.customData.ajaxErrorMessage||a.message;if(t&&0===t.indexOf("Uncaught ")&&(t=a.message.substring(9)),t=t||e.status||"Script error.",A&&A.test(t))Y.log("Atatus: canceling send due to Script error or ignored errors.");else{var n=[];a.stack&&a.stack.length&&Y.forEach(a.stack,function(a,b){Y.endsWith(b.url,"/atatus.js")||Y.endsWith(b.url,"/atatus.min.js")||n.push({ln:b.line||0,cn:b.column||0,f:b.url||"anonymous",m:b.func||"[anonymous]"})});var r=[a.name,t,JSON.stringify(n)].join("|");if(r!==j){j=r;var g=e.customData;try{JSON.stringify(g)}catch(e){var i="Cannot add custom data; may contain circular reference";g={error:i},Y.log("Atatus: "+i)}var o=ne.getAllEvents();ee.clear();var c={class:a.name,url:b.location.href,message:t,name:t,backTraces:n,breadCrumbs:o,customData:g||null,tags:e.tags,ts:(new Date).getTime()};if("function"==typeof P&&(c.groupingKey=P(c)),"function"==typeof C)C(c)&&(delete c.name,s(c));else delete c.name,s(c)}else Y.log("Atatus: canceling send due to duplicate errors")}}else Y.log("Atatus: Canceling send due to no stacktrace.")}function s(a){f(G,{customData:m||null,errors:[a]})}function f(e,t){if(c()){if(B&&B.length&&location.host&&location.host.match){for(var n=!1,r=B.length,g=0;r>g;g++)if(location.host.match(B[g])){n=!0;break}if(!n)return void Y.log("Atatus: canceling send due to not a allowed domain")}if(!t.ts){var o=a.screen||function(){var e=b.documentElement,t=b.getElementsByTagName("body")[0];return{width:a.innerWidth||e.clientWidth||t.clientWidth,height:a.innerHeight||e.clientHeight||t.clientHeight}}();t.ts=(new Date).getTime(),t.apikey=h,t.request={url:b.location.href,ua:navigator.userAgent,w:o.width,h:o.height},t.tags=t.tags||z,t.user=v&&v.id?v:null,t.aid=w||null,t.sid=re.sessionId||"",t.v=S||"",t._v=U||""}if(y&&(t.aip=!0),N)if(!N(t))return void Y.log("Atatus: canceling send due to false from beforeSend callback.");Y.log("Sending data to Atatus Receiver:",t),e===Q?function(a,e){var t=b.createElement("script"),n=V+a+"?data="+encodeURIComponent(e)+"&callback=atatus._setFeatures";t.type="text/javascript",t.src=n;var r=b.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}(e,JSON.stringify(t)):function(a,b){var e=V+a+"?data="+encodeURIComponent(b);if(e.length>4e4)return void Y.log("Atatus: Canceling session send due to large payload size.");var t=new Image;t.crossOrigin="anonymous",t.onload=function(){q()},t.onerror=t.onabort=function(){J&&a===G&&function(a){try{if(l()&&localStorage.length<50){var e="atatusjs="+(new Date).toJSON()+"="+Y.getRandomInt();void 0===localStorage[e]&&(localStorage[e]=a)}else Y.log("Atatus: Reached local storage limit.")}catch(e){Y.log("Atatus: LocalStorage full, cannot save exception")}}(b)},t.src=e}(e,JSON.stringify(t))}}var h,m,v,y,w,S,_,E,I,x,k,O,T,A,j,P,N,C,R,D,U="3.1.1",L=TraceKit.noConflict(),M=a.atatus,z=[],F=!1,B=[],$=!1,J=!1,K=!1,W=!1,X="atatus-user",H="atatus-aid",V="https://br-rx.atatus.com",G="/track/browser/errors",Q="/track/browser/perf/pageload",Z="/track/browser/perf/user";n&&(D=n(b));var Y={isBoolean:function(a){return void 0!==a&&"boolean"==typeof a},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isFunction:function(a){return"function"==typeof a},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},serialize:function(a){if(!a)return"";if(Y.isString(a)||Y.isNumber(a)||Y.isBoolean(a)||Y.isFunction(a))return""+a;if("object"==typeof a)try{return JSON.stringify(a)}catch(e){return"Unserializable Object"}return""},endsWith:function(a,b){return!(!a||!b)&&-1!==a.indexOf(b,a.length-b.length)},joinRegExp:function(a){for(var b,e=[],t=0,n=a.length;n>t;t++)b=a[t],Y.isString(b)?e.push(b.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&e.push(b.source);return new RegExp(e.join("|"),"i")},getTargetUrl:function(b){return a.XDomainRequest&&$&&(b=b.slice(6)),b},now:function(){return(new Date).getTime()},pad:function(a){return 1===(a=String(a)).length&&(a="0"+a),a},merge:function(a,b){var e,t={};for(e in a)t[e]=a[e];for(e in b)t[e]=b[e];return t},mergeArray:function(a,b){return null!=b?a.concat(b):a},forEach:function(a,b){for(var e=0;e<a.length;e++)b.call(null,e,a[e])},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},getRandomInt:function(){return Math.floor(9007199254740992*Math.random())},log:function(b,e){F&&a.console&&a.console.log&&(a.console.log(b),e&&a.console.log(e))},bind:function(a,b){return function(){return a.apply(b,Array.prototype.slice.call(arguments))}},canAllowInsecureSubmissions:function(){var b=a.navigator.userAgent,e=b.match(/Trident\/([\d.]+)/),t=e&&"7.0"===e[1]?11:!!(b=b.match(/MSIE ([\d.]+)/))&&parseInt(b[1],10);return t&&9>=t},uuid4:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})},addEventListener:function(b,e,t){return void 0!==a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener?a.addEventListener(b,e,t):void 0},arrayFromObject:function(a){var b=[];for(var e in a)a.hasOwnProperty(e)&&b.push(a[e]);return b},createCookie:function(a,e,t){try{var n,r;if(t){var g=new Date;g.setTime(g.getTime()+60*t*60*1e3),n="; expires="+g.toGMTString()}else n="";return r=(new Date).toISOString(),b.cookie=a+"=id|"+e+"&timestamp|"+r+n+"; path=/",r}catch(e){Y.log("Creating cookie failed.",e)}},readCookieElement:function(a,b){var e=a.split(/[|&]/);return"id"===b?e[1]:"timestamp"===b?e[3]:void 0},readCookie:function(a){try{for(var e=a+"=",t=b.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}catch(e){Y.log("Reading cookie failed.",e)}}},ee={eventObject:{},all:function(a){for(var b=this.getEventObject(a),e=[],t=0;t<b.length;t++)e.push(b[t].value);return e},clear:function(){for(var a in this.eventObject)this.eventObject.hasOwnProperty(a)&&(this.eventObject[a].length=0)},add:function(a,b){var e=this.getEventObject(a),t=Y.uuid4();return e.push({key:t,value:b}),this.truncateEventObject(a,10),t},get:function(a,b){for(var e=this.getEventObject(a),t=0;t<e.length;t++)if(e[t].key===b)return e[t].value;return!1},getEventObject:function(a){return this.eventObject[a]||(this.eventObject[a]=[]),this.eventObject[a]},truncateEventObject:function(a,b){var e=this.getEventObject(a);e.length>b&&(this.eventObject[a]=e.slice(e.length-b))}},te={attach:function(b,e,t,n,r){b=b||a.console||{};for(var g=r||["log","debug","info","warn","error"],o=g.pop(),i=function(a,b,t){e&&ee.add("timeline",{ts:Y.now(),c:"console",l:a,m:Y.serialize(b)}),"error"===a&&n&&re.notify(new Error(b),t)};o;)this.wrapConsoleMethod(b,o,t,i),o=g.pop()},wrapConsoleMethod:function(a,b,e,t){var n=a[b],r=a;b in a&&(a[b]=function(){var a=[].slice.call(arguments),g=""+a.join(" ");t&&t(b,g,{level:b,logger:"console"}),n&&e&&Function.prototype.apply.call(n,r,a)})}},ne={attach:function(){var a=Y.bind(this.onDocumentClicked,this),e=Y.bind(this.onInputChanged,this);b.addEventListener?(b.addEventListener("click",a,!0),b.addEventListener("blur",e,!0)):b.attachEvent&&(b.attachEvent("onclick",a),b.attachEvent("onfocusout",e))},writeUserEvent:function(a,b,e,t){"password"===this.getElementType(a)&&(e=void 0),ee.add("timeline",{ts:Y.now(),a:b,e:this.getOuterHTML(a),v:this.getValueKind(e,t)})},onDocumentClicked:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"a")||this.isTarget(b,"button")||this.isTarget(b,"input",["button","submit"])?this.writeUserEvent(b,"click"):this.isTarget(b,"input",["checkbox","radio"])&&this.writeUserEvent(b,"check",b.value,b.checked))},onInputChanged:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"textarea")?this.writeUserEvent(b,"input",b.value):this.isTarget(b,"select")&&b.options&&b.options.length?this.onSelectInputChanged(b):this.isTarget(b,"input")&&!this.isTarget(b,"input",["button","submit","hidden","checkbox","radio"])&&this.writeUserEvent(b,"input",b.value))},onSelectInputChanged:function(a){if(a.multiple){for(var b=0;b<a.options.length;b++)if(a.options[b].selected){this.writeUserEvent(a,"select",a.options[b].value);break}}else 0<=a.selectedIndex&&a.options[a.selectedIndex]&&this.writeUserEvent(a,"select",a.options[a.selectedIndex].value)},getElementFromEvent:function(a){return a.target||b.elementFromPoint(a.clientX,a.clientY)},isTarget:function(a,b,e){if(a.tagName.toLowerCase()!==b.toLowerCase())return!1;if(!e)return!0;for(var t=this.getElementType(a),n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},getElementType:function(a){return(a.getAttribute("type")||"").toLowerCase()},getOuterHTML:function(a){for(var b="<"+a.tagName.toLowerCase(),e=a.attributes,t=0,n=e.length;n>t;t++){var r=e[t].name;"value"!==r.toLowerCase()&&(b+=" "+r+'="'+e[t].value+'"')}return b+" >"},getValueKind:function(a,b){return null==a?null:{length:a.length,checked:b,pattern:this.matchInputPattern(a)}},matchInputPattern:function(a){return""===a?"empty":/^[a-z0-9!#$%&'*+=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/.test(a)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(a)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(a)?"date":/^(?:(?:\+?1\s*(?:[.\-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.\-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.\-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(a)?"phone":/^\s*$/.test(a)?"whitespace":/^\d*$/.test(a)?"numeric":"character"},getAllEvents:function(){return ee.all("timeline")}},re={VERSION:U,noConflict:function(){return a.atatus=M,re},isConfigured:function(){return!!h},config:function(b,e){if(e=e||{},h=b,L.remoteFetching=!1,A=[],e&&(m=e.customData,z=e.tags||[],F=!!e.debugMode,y=!!e.anonymizeIp,K=!!e.reportAjaxErrors,W=!!e.reportUnhandledRejections,_=!!e.disableBreadcrumbs,E=!!e.disableErrorTracking,O=!!e.disableRUM,I=!!e.disableAjaxMonitoring,x=e.disableSession!==r&&e.disableSession,k=e.disableSPA===r||e.disableSPA,e.ignoreErrors&&Y.isArray(e.ignoreErrors)&&(A=e.ignoreErrors),re.setAllowedDomains(e.allowedDomains),re.setVersion(e.version),re.enableOffline(e.enableOffline||e.offline),re.onBeforeSend(e.beforeSend),re.onBeforeErrorSend(e.beforeErrorSend),re.setGroupingKeyCallback(e.groupingKeyCallback)),$=Y.canAllowInsecureSubmissions(),A.push(/^Script error\.?$/),A.push(/^Javascript error: Script error\.? on line 0$/),A=Y.joinRegExp(A),q(),T={enabled:!1,timeline:!0,display:!0,error:!0,levels:null},Y.isBoolean(e.console)&&(T.enabled=e.console),Y.isBoolean(e.consoleTimeline)&&(T.timeline=e.consoleTimeline),Y.isBoolean(e.consoleDisplay)&&(T.display=e.consoleDisplay),Y.isBoolean(e.consoleErrorNotify)&&(T.error=e.consoleErrorNotify),Y.isArray(e.consoleTimelineLevels)&&(T.levels=e.consoleTimelineLevels),T.enabled&&"console"in a&&a.console.log&&te.attach(a.console,T.timeline,T.display,T.error,T.levels),_||ne.attach(),I||O||re.__attachAjaxHooks(),!O&&re.SessionTracking){var t=function(){(R=new re.SessionTracking).attach(x)};a.addEventListener?a.addEventListener("load",t):a.attachEvent("onload",t)}return function(){try{var a;if(l()&&(a=localStorage.getItem(X)),a)v=JSON.parse(a),w=null;else{var b,e=Y.readCookie(H);e&&(b=Y.readCookieElement(e,"id")),b&&"undefined"!==b?w=b:(w=Y.uuid4(),Y.createCookie(H,w))}}catch(e){Y.log("Atatus Get User: Invalid JSON object in LocalStorage",e)}}(),re},install:function(){return c()?(E||(L.report.subscribe(d),L.extendToAsynchronousCallbacks(),D&&K&&D.ajaxError(i),W&&("addEventListener"in a&&a.addEventListener("unhandledrejection",o))),re):re},uninstall:function(){return h=null,E||(L.report.unsubscribe(d),D&&K&&D.unbind("ajaxError",i),W&&("removeEventListener"in a&&a.removeEventListener("unhandledrejection",o))),re},setCustomData:function(a){return m=a,re},setTags:function(a){return a&&Y.isArray(a)&&(z=a),re},setAllowedDomains:function(a){return a&&Y.isArray(a)&&(B=a),re},getAllowedDomains:function(){return B},setUser:function(a,b,e,t){return function(a,b,e,t){if(a){v={},a&&(v.id=""+a),b&&(v.email=""+b),e&&(v.name=""+e),t&&(v.anonymous=t);try{l()&&localStorage.setItem(X,JSON.stringify(v)),w&&f(Z,{}),w=null,Y.createCookie(e,H,-1)}catch(e){Y.log("Atatus Set User: Invalid JSON object in LocalStorage",e)}}}(a,b,e,t),re},resetUser:function(){return function(){try{v=null,l()&&localStorage.removeItem(X),w=null,Y.createCookie(name,H,-1)}catch(e){Y.log("Atatus Reset User",e)}}(),re},setVersion:function(a){return a&&(S=""+a),re},enableOffline:function(a){return Y.isBoolean(a)&&(J=a),re},onBeforeSend:function(a){return Y.isFunction(a)&&(N=a),re},onBeforeErrorSend:function(a){return Y.isFunction(a)&&(C=a),re},setGroupingKeyCallback:function(a){return Y.isFunction(a)&&(P=a),re},setAPIEndpoint:function(a){return V=a,re},getAPIEndpoint:function(){return V},init:function(a,b,e){return e&&((b=b||{}).customData=e),re.config(a,b)},withCustomData:function(a){return re.setCustomData(a)},withTags:function(a){return re.setTags(a)},attach:function(){return re.install()},detach:function(){return re.uninstall()},endSession:function(){return R&&R.endSession(),re},_setFeatures:function(a){Y.isObject(a)&&(I=!!a.daj,x=!!a.dss,k=!!a.dspa,O=!!a.drum,!!a.d,a.error&&Y.log("Error in sending data to Atatus",a.error))},measureRoute:function(a){return R&&a&&R.virtualPageLoaded(a),re},leaveBreadcrumb:function(a,b){return a?(ee.add("timeline",{ts:Y.now(),c:"breadcrumb",l:b||"info",m:Y.serialize(a)}),re):void 0},notify:function(a,b,e){return"string"==typeof a?void Y.log("atatus.notify() was called with a string. Expected instance of Error."):re.send(a,b,e)},sendPerf:function(a){return O?void Y.log("RUM is disabled. Please enable it in the config options."):f(Q,a)},sendAjaxPerf:function(a){return O||I?void Y.log("AJAX monitoring is disabled. Please enable it in the config options."):f("/track/browser/perf/ajax",a)},sendSessionPerf:function(a){return O||x?void Y.log("Session Tracking is disabled. Please enable it in the config options."):f("/track/browser/perf/session",a)},sendSPAPerf:function(a){return O||k?void Y.log("SPA Tracking is disabled. Please enable it in the config options."):f("/track/browser/perf/spa",a)},sendTxnPerf:function(a){return f("/track/browser/perf/txn",a)},send:function(a,b,e){try{d(L.computeStackTrace(a),{customData:b,tags:e})}catch(e){if(a!==e)throw e}return re},_helper:Y};a.atatus=re,e.exports=re,void 0!==t&&(t.atatus=re)}(window,document,window.jQuery),function(a,b,e,t){function n(a){a.pl<=0||e.sendPerf(a)}var r=(new Date).getTime(),i=i||{};i.q=i.q||[],i.version="0.3",i.targetOrigin=b.location.protocol+"//"+b.location.hostname,i.bPostMessage=!1,i.beaconUrl=i.beaconUrl||"/images/beacon.gif",i.autorun=!1,i.init=function(){if(i.bDone=!1,i.bUnloaded=!1,i.marks={},i.measures={},i.starts={},i.findStartTime(),i.addEventListener("beforeunload",i.beforeUnload,!1),i.addEventListener("pagehide",i.beforeUnload,!1),i.addEventListener("unload",i.beforeUnload,!1),i.processQ(),"complete"===b.readyState){var e=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;e&&void 0!==e.timing&&void 0!==e.timing.loadEventEnd&&(i.mark("firstbyte",e.timing.responseStart),i.mark("onload",e.timing.loadEventEnd)),i.done()}else i.addEventListener("load",i.onload,!1)},i.processQ=function(){for(var a=i.q.length,b=0;a>b;b++){var e=i.q[b],t=e[0];"mark"===t?i.mark(e[1],e[2]):"measure"===t?i.measure(e[1],e[2],e[3]):"done"===t&&i.done(e[1])}},i.mark=function(b,e){return i.dprint("RUM_EPISODES.mark: "+b+", "+e),b?(i.marks[b]=parseInt(e||(new Date).getTime()),i.bPostMessage&&a.postMessage("RUM_EPISODES:mark:"+b+":"+e,i.targetOrigin),void("firstbyte"===b?i.measure("backend","starttime","firstbyte"):"onload"===b?(i.measure("frontend","firstbyte","onload"),i.measure("page load time","starttime","onload")):"done"===b&&i.measure("total load time","starttime","done"))):void i.dprint("Error: markName is undefined in RUM_EPISODES.mark.")},i.measure=function(b,e,t){if(i.dprint("RUM_EPISODES.measure: "+b+", "+e+", "+t),b){var n,r;if(void 0===e)n="number"==typeof i.marks[b]?i.marks[b]:(new Date).getTime();else if("number"==typeof i.marks[e])n=i.marks[e];else{if("number"!=typeof e)return void i.dprint("Error: unexpected startNameOrTime in RUM_EPISODES.measure: "+e);n=e}if(void 0===t)r=(new Date).getTime();else if("number"==typeof i.marks[t])r=i.marks[t];else{if("number"!=typeof t)return void i.dprint("Error: unexpected endNameOrTime in RUM_EPISODES.measure: "+t);r=t}i.starts[b]=parseInt(n),i.measures[b]=parseInt(r-n),i.bPostMessage&&a.postMessage("RUM_EPISODES:measure:"+b+":"+n+":"+r,i.targetOrigin)}else i.dprint("Error: episodeName is undefined in RUM_EPISODES.measure.")},i.done=function(b){i.bDone=!0,i.mark("done"),i.bPostMessage&&a.postMessage("RUM_EPISODES:done",i.targetOrigin),"function"==typeof b&&b()},i.getMarks=function(){return i.marks},i.getMeasures=function(){return i.measures},i.getStarts=function(){return i.starts},i.findStartTime=function(){var a=i.findStartWebTiming()||i.findStartCookie();a&&i.mark("starttime",a)},i.findStartWebTiming=function(){var b,e=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;return e&&void 0!==e.timing&&void 0!==e.timing.navigationStart&&(b=e.timing.navigationStart,i.dprint("RUM_EPISODES.findStartWebTiming: startTime = "+b)),b},i.findStartCookie=function(){try{for(var e=b.cookie.split(" "),t=0;t<e.length;t++)if(0===e[t].indexOf("RUM_EPISODES=")){for(var n,g,r=e[t].substring("RUM_EPISODES=".length).split("&"),o=0;o<r.length;o++)if(0===r[o].indexOf("s="))n=r[o].substring(2);else if(0===r[o].indexOf("r=")){var c=r[o].substring(2);c=c.replace(/;$/,""),g=a.escape(b.referrer)===c}if(g&&n)return i.dprint("RUM_EPISODES.findStartCookie: startTime = "+n),n}}catch(e){}},i.beforeUnload=function(){try{if(i.bUnloaded)return;b.cookie="RUM_EPISODES=s="+Number(new Date)+"&r="+a.escape(b.location)+"; path=/",i.bUnloaded=!0}catch(e){}},i.onload=function(){i.mark("onload"),i.done()},i.addEventListener=function(b,e,t){return void 0!==a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener?a.addEventListener(b,e,t):void 0},i.dprint=function(){},i.init();var o=null,c={navigationStart:"ns",redirectStart:"rds",redirectEnd:"rde",unloadEventStart:"us",unloadEventEnd:"ue",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",secureConnectionStart:"scs",connectEnd:"ce",handshakeStart:"hs",requestStart:"rqs",responseStart:"rps",responseEnd:"rpe",domLoading:"dl",domInteractive:"di",domContentLoadedEventStart:"dcs",domContentLoadedEventEnd:"dce",domComplete:"dc",loadEventStart:"ls",loadEventEnd:"le"},l=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;l&&void 0!==l.timing&&void 0!==l.navigation?o=setInterval(function(){var e=(a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance).timing;if(0===e.loadEventEnd)return!1;clearInterval(o),o=null;var t=e.navigationStart;0>=t&&(t=e.fetchStart);var r={};for(var g in c)r[c[g]]=-1,g in e&&(e[g]<=0||(r[c[g]]=e[g]-t));n({nt:r.rps-r.ns,dp:r.dce-r.rps,pr:r.le-r.dce})},100):(i.mark("firstbyte",r),o=setInterval(function(){if(!i||!i.bDone)return!1;clearInterval(o),o=!1;var a=i.getMeasures();if(null!=a&&null!=a.backend&&null!=a.frontend&&null!=a["page load time"]&&null!=a["total load time"]){var b=a.backend,e=a.backend+a.frontend;n({nt:b,dp:e-b,pr:a["total load time"]-e,fe:a["total load time"]-b,pl:a["total load time"]})}},100))}(window,document,window.atatus),a=window,(b=window.atatus).SessionTracking=function(){function e(a){var e=p.readCookie(q.cookieName),t=null===e,n="string"==typeof exisitingCookie&&e.length>0&&-1===e.indexOf("timestamp"),r=null,g=null;if(t||n||(g=new Date(p.readCookieElement(e,"timestamp")),r=new Date(new Date-s)>g),t||n||r)b.sessionId=p.uuid4(),q.existingTimestamp=p.createCookie(q.cookieName,b.sessionId),a(!0);else{var i=p.readCookieElement(e,"id");"undefined"===i?(b.sessionId=p.uuid4(),q.existingTimestamp=p.createCookie(q.cookieName,b.sessionId),a(!0)):(b.sessionId=i,q.existingTimestamp=g,a(!1))}}function t(a){return Math.min(a,3e5)}function g(a){for(var b in a)isNaN(a[b])&&"string"!=typeof a[b]&&(a[b]=0);return a}function r(b,e){var t;return t="object"==typeof a.performance&&"function"==typeof a.performance.now?a.performance.now():0,{du:Math.min(q.maxVirtualPageDuration,t-(b||e)),o:Math.min(q.maxVirtualPageDuration,t-e)}}function i(a){var b={du:a.loadEventEnd-a.navigationStart,s:a.fetchStart};return a.domainLookupStart&&a.domainLookupStart>0&&(b.dls=a.domainLookupStart-a.fetchStart),a.domainLookupEnd&&a.domainLookupEnd>0&&(b.dle=a.domainLookupEnd-a.fetchStart),a.connectStart&&a.connectStart>0&&(b.cs=a.connectStart-a.fetchStart),a.connectEnd&&a.connectEnd>0&&(b.ce=a.connectEnd-a.fetchStart),a.responseStart&&a.responseStart>0&&(b.rps=a.responseStart-a.fetchStart),a.responseEnd&&a.responseEnd>0&&(b.rpe=a.responseEnd-a.fetchStart),a.domLoading&&a.domLoading>0&&(b.dl=a.domLoading-a.fetchStart),a.domInteractive&&a.domInteractive>0&&(b.di=a.domInteractive-a.fetchStart),a.domContentLoadedEventEnd&&a.domContentLoadedEventEnd>0&&(b.dce=a.domContentLoadedEventEnd-a.fetchStart),a.domComplete&&a.domComplete>0&&(b.dc=t(a.domComplete-a.fetchStart)),a.loadEventStart&&a.loadEventStart>0&&(b.ls=a.loadEventStart-a.fetchStart),a.loadEventEnd&&a.loadEventEnd>0&&(b.le=a.loadEventEnd-a.fetchStart),a.secureConnectionStart&&a.secureConnectionStart>0&&(b.scs=a.secureConnectionStart-a.connectStart-a.fetchStart),g(b)}function o(a,b){var e={du:t(a.duration),s:b+a.fetchStart};return a.domainLookupStart&&a.domainLookupStart>0&&(e.dls=a.domainLookupStart-a.fetchStart),a.domainLookupEnd&&a.domainLookupEnd>0&&(e.dle=a.domainLookupEnd-a.fetchStart),a.connectStart&&a.connectStart>0&&(e.cs=a.connectStart-a.fetchStart),a.connectEnd&&a.connectEnd>0&&(e.ce=a.connectEnd-a.fetchStart),a.responseStart&&a.responseStart>0&&(e.rps=a.responseStart-a.fetchStart),a.responseEnd&&a.responseEnd>0&&(e.rpe=a.responseEnd-a.fetchStart),a.secureConnectionStart&&a.secureConnectionStart>0&&(e.scs=a.secureConnectionStart-a.connectStart-a.fetchStart),g(e)}function c(){var b=a.location.pathname,e=a.location.protocol+"//"+a.location.host+b;return e.length>800&&(e=e.substring(0,800)),{u:e,t:i(a.performance.timing),g:"p"}}function l(b,e,t){var n=a.location.protocol+"//"+a.location.host+b;return n.length>800&&(n=n.substring(0,800)),{u:n,t:r(e,t),g:"r"}}function d(b,e){var t=b.name.split("?")[0];return t.length>800&&(t=t.substring(0,800)),{u:t,t:o(b,e?0:a.performance.timing.navigationStart),g:"xmlhttprequest"===b.initiatorType||"fetch"===b.initiatorType?"x":"s",z:b.decodedBodySize||0}}function f(b,e){if(a.performance!==n&&a.performance.getEntriesByType)try{for(var t=a.performance.getEntriesByType("resource"),r=q.offset;r<t.length;r++){var g=t[r].name.split("?")[0];0!==g.indexOf(q.atatusHost)&&(g.indexOf("favicon.ico")>0||0!==g.indexOf("about:blank")&&("j"!==g[0]||1!==g.indexOf("avascript:"))&&0!==g.indexOf("chrome-extension://")&&0!==g.indexOf("res://")&&0!==g.indexOf("file://")&&b.push(d(t[r],e)))}q.offset=t.length}catch(e){}}function h(b,e,t,r){if(a.performance===n||a.performance.timing===n||a.performance.timing.fetchStart===n||isNaN(a.performance.timing.fetchStart))return null;var g=[{rs:[]}];if(e&&(t&&(r?g[0].p=c():g[0].rs.push(c())),f(g[0].rs)),b){q.pendingVirtualPage&&(g[0].r=q.pendingVirtualPage);var o=null==q.pendingVirtualPage;if(q.pendingVirtualPage=l(b,q.previousVirtualPageLoadTimestamp,q.initalStaticPageLoadTimestamp),!o&&g.length>0)return g}return g}var p=b._helper,q=this,m={};b.sessionId=null,this.cookieName="atatus-sid",this.virtualPage=null,this.heartBeatInterval=null,this.offset=0,this.atatusHost=b.getAPIEndpoint(),this.maxVirtualPageDuration=18e5;var s=6e5;this.existingTimestamp=null,this.stopSession=!1,this.sendSessionPayload=function(a){q.stopSession||b.sendSessionPerf(a)},this.sendSPAPayload=function(a){b.sendSPAPerf(a)},this.attach=function(b){if(!b){e(function(a){setTimeout(function(){q.pageLoaded(a)},5e3)});var t=function(){this.watchCookieTimestamp()}.bind(m),n=function(){"visible"===document.visibilityState&&this.watchCookieTimestamp()}.bind(m);a.addEventListener?(a.addEventListener("click",t),document.addEventListener("visibilitychange",n),a.addEventListener("beforeunload",function(){var a=[{rs:[]}];if(f(a[0].rs),a[0].rs.length>0){var b={data:a};q.sendSessionPayload(b)}})):a.attachEvent&&document.attachEvent("onclick",t)}},this.pageLoaded=function(b){q.sendPerformance(!0,!0,b),q.heartBeat(),q.initalStaticPageLoadTimestamp="object"==typeof a.performance&&"function"==typeof a.performance.now?a.performance.now():0},this.endSession=function(){q.stopSession=!0,p.createCookie(q.cookieName,b.sessionId,-1)},this.heartBeat=function(){q.heartBeatInterval=setInterval(function(){var a=[{rs:[]}];if(f(a[0].rs,q.virtualPage),a[0].rs.length>0){var b={data:a};q.sendSessionPayload(b)}},3e4)},this.virtualPageLoaded=function(b){var e=null==this.virtualPage;"string"==typeof b&&(b.length>0&&"/"!==b[0]&&(b+="/"),b.length>800&&(b=b.substring(0,800)),this.virtualPage=b),e?this.sendPerformance(!0,!1,!1):this.sendPerformance(!1,!1,!1),"string"==typeof b&&(this.previousVirtualPageLoadTimestamp="object"==typeof a.performance&&"function"==typeof a.performance.now?a.performance.now():0)},this.sendPerformance=function(a,b,e){var t=h(this.virtualPage,a,b,e);if(t){var n={data:t};t[0].r?q.sendSPAPayload(n):t[0].rs.length>0&&q.sendSessionPayload(n)}},m.watchCookieTimestamp=function(){var a;if(q.existingTimestamp){var b=new Date(new Date-s);a=q.existingTimestamp<b}a&&(q.stopSession=!0)}},function(a,b,e){e.__attachAjaxHooks=function(){var t=e._helper,n={queue:[],batchSize:25,processing:!1,bUnloaded:!1,push:function(a){"string"==typeof a.url&&a.url.indexOf(".html")>0||(this.queue.push(a),this.queue.length>=this.batchSize&&this._processQueue())},_processQueue:function(){if(!this.processing&&this.queue.length){this.processing=!0;try{for(var a={},b={},n=0;n<this.queue.length;n++){var r,g=this.queue[n],o=g.status;if(400>o){r=g.method+g.url;var i=g.respAvailTime-g.sendTime,c=g.respProcTime-g.respAvailTime,l=g.receivedSize,d=g.sendSize,f=a[r];f?(f.rt.push(i),f.ct.push(c),f.rz.push(l),f.sz.push(d)):a[r]={m:g.method,u:g.url,rt:[i],ct:[c],rz:[l],sz:[d]}}else{var h=b[r=g.method+o+g.url];h&&h.sc?h.sc[o]?h.sc[o]++:h.sc[o]=1:(b[r]={m:g.method,u:g.url,sc:{}},b[r].sc[o]=1)}}var m={xhr:t.arrayFromObject(a),xhrError:t.arrayFromObject(b)};e.sendAjaxPerf(m)}catch(e){t.log("Error while processing queue: ",e)}finally{this.queue=[],this.processing=!1}}},beforeUnload:function(){n.bUnloaded||(n._processQueue(),n.bUnloaded=!0)}};t.addEventListener("beforeunload",n.beforeUnload,!1);var r={support:function(a){return!a||"apply"in a},around:function(a,b,e,n){return a=a||function(){},function(){var r,i,g=Array.prototype.slice.call(arguments);try{b&&(r=b.apply(this,g))}catch(e){t.log(n,e)}try{i=a.apply(this,r||g)}finally{try{e&&e.apply(this,g)}catch(e){t.log(n,e)}}return i}},before:function(a,b){return r.around(a,b)},after:function(a,b){return r.around(a,null,b)},timeout:function(a){setTimeout(a,0)},wrapAddEventListener:function(){return function(a,b){var e,t;if(("load"===a||"error"===a)&&b&&this._atrumXhrData)return b.__atrumInterceptor?e=b.__atrumInterceptor:r.support(b)?(e=o.wrapXHR(b,this,"XHR.invokeEventListener"),b.__atrumInterceptor=e):e=null,e&&((t=Array.prototype.slice.call(arguments))[1]=e),t}},wrapRemoveEventListener:function(){return function(a,b){if(this._atrumXhrData){var e=Array.prototype.slice.call(arguments);return b.__atrumInterceptor&&(e[1]=b.__atrumInterceptor),e}}},aroundWithHandleEvent:function(a,b,e,t){var n=a;return a&&"object"==typeof a&&"toString"in a&&"[xpconnect wrapped nsIDOMEventListener]"===a.toString()&&"handleEvent"in a&&(n=function(){a.handleEvent.apply(this,Array.prototype.slice.call(arguments))}),r.around(n,b,e,t)},getFullyQualifiedUrl:function(a){var e=b.createElement("a");return e.href=a,e.href}};if(a.XMLHttpRequest&&a.XMLHttpRequest.prototype){var g=a.XMLHttpRequest.prototype;if(!("open"in g&&"send"in g))return;if(!r.support(g.open)||!r.support(g.send))return;var o={captureAjaxTimings:function(a){var b=a._atrumXhrData;if(b){var e=(new Date).getTime();2===a.readyState?b.firstByteTime=b.firstByteTime||e:4===a.readyState&&(b.respAvailTime=b.respAvailTime||e,b.firstByteTime=b.firstByteTime||e)}},sendPayload:function(a,b){b.receivedSize=0,a.responseType&&"text"!==a.responseType||"string"==typeof a.responseText&&(b.receivedSize=a.responseText.length),b.status=a.status,n.push(b)},wrapXHR:function(a,b,e){return r.aroundWithHandleEvent(a,function(){o.captureAjaxTimings(this)},function(){var a=b._atrumXhrData;if(a&&4===b.readyState){var e=(new Date).getTime();a.respProcTime=a.respProcTime||e,o.sendPayload(b,a),delete b._atrumXhrData}},e)},ajaxDone:function(a){if(a._atrumXhrData){var b=(new Date).getTime()+3e4,e=function(){o.captureAjaxTimings(a);var t=a._atrumXhrData;if(t){var n=(new Date).getTime();4===a.readyState?(t.respProcTime=t.respProcTime||n,o.sendPayload(a,t),delete a._atrumXhrData):b>n?setTimeout(e,50):delete a._atrumXhrData}};e()}}};g.open=r.around(g.open,function(){var a=1<=arguments.length?String(arguments[0]):"",b=2<=arguments.length?String(arguments[1]):"",t=e.getAllowedDomains(),n=!0;if((b=r.getFullyQualifiedUrl(b))&&t&&t.length){n=!1;for(var g=0;g<t.length;g++){var o=t[g];if(o&&b.match&&b.match(o)){n=!0;break}}}n&&(b=b&&b.split("?")[0],this._atrumXhrData={method:a,url:b,sendTime:null,sendSize:null,firstByteTime:null,respAvailTime:null,respProcTime:null,receivedSize:null,parentPhase:null})},null,"XHR.open"),g.send=r.around(g.send,function(){var a=this,b=a._atrumXhrData;if(b){var e=(new Date).getTime();b.sendTime=b.sendTime||e,b.sendSize=1<=arguments.length&&arguments[0]&&arguments[0].length||0;var t=0,n=function(){if(4===a.readyState)o.ajaxDone(a);else{var b=null;try{b=a.onreadystatechange}catch(e){return void o.ajaxDone(a)}t++,b?r.support(b)?a.onreadystatechange=o.wrapXHR(b,a,"XHR.onReadyStateChange"):o.ajaxDone(a):5>t?r.timeout(n):o.ajaxDone(a)}};n()}},null,"XHR.send"),"addEventListener"in g&&"removeEventListener"in g&&r.support(g.addEventListener)&&r.support(g.removeEventListener)&&(g.addEventListener=r.around(g.addEventListener,r.wrapAddEventListener(),null,"XHR.addEventListener"),g.removeEventListener=r.around(g.removeEventListener,r.wrapRemoveEventListener(),null,"XHR.removeEventListener"))}if("fetch"in a&&!a.fetch.polyfill){var i=a.fetch;a.fetch=function(a){return function(){for(var b=new Array(arguments.length),e=0;e<b.length;++e)b[e]=arguments[e];var t="GET",r=0;b[1]&&(b[1].method&&(t=b[1].method),"string"==typeof b[1].body&&(r=b[1].body.length));var g={url:b[0],method:t,sendSize:r,receivedSize:0,sendTime:(new Date).getTime(),respAvailTime:0,respProcTime:0};return a.apply(this,b).then(function(a){return g.respAvailTime=(new Date).getTime(),g.respProcTime=g.respAvailTime,g.status=a.status,a.headers&&a.headers.get&&(g.receivedSize=a.headers.get("Content-Length")),n.push(g),a})}}(i)}}}(window,document,window.atatus),function(a,b){function e(a,e,t){if(!(0>=e)){var n={data:[{t:{n:a,s:t,t:{du:e}}}]};b.sendTxnPerf(n)}}function t(a){return i+" "+a}function n(){try{return"localStorage"in a&&null!==a.localStorage}catch(e){return!1}}function g(a){var b=null,e=t(a);try{b=localStorage.getItem(e),localStorage.removeItem(e)}catch(e){}var n=0;return b&&(n=r.now()-b),n}var i="atatus.com/",r=b._helper;b.beginTransaction=function(a){n()&&function(a){var b=r.now();try{localStorage.setItem(t(a),b)}catch(e){}}(a)},b.endTransaction=function(a){n()&&e(a,g(a),1)},b.failTransaction=function(a){n()&&e(a,g(a),0)},b.cancelTransaction=function(a){n()&&function(a){try{var b=t(a);localStorage.removeItem(b)}catch(e){}}(a)},b.recordTransaction=function(a,b){n()&&a&&b&&e(a,b,1)}}(window,window.atatus),function(a,b){a._atatusConfig&&a._atatusConfig.apikey&&b.config(a._atatusConfig.apikey,a._atatusConfig).install()}(window,window.atatus)}).call(this,n(86))}}]);